<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö-‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</title>

    <link rel="stylesheet" href="./libs/prompt.css">
    <link rel="stylesheet" href="./libs/all.min.css">
    
    <script src="./libs/tailwindcss.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class', // ‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ Tailwind ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö Dark Mode ‡∏à‡∏≤‡∏Å Class 'dark' ‡πÉ‡∏ô body
        }
    </script>

    <script src="./libs/sweetalert2.js"></script>
    <script src="./libs/chart.js"></script>
    <script src="./libs/chartjs-plugin-datalabels.js"></script>
    <script src="./libs/crypto-js.min.js"></script>
    <script src="./libs/fullcalendar.min.js"></script>
    <script src="./libs/panzoom.min.js"></script>
    <script src="./libs/xlsx.full.min.js"></script>
    <script src="./libs/tesseract.min.js"></script>
    
    <script src="https://www.gstatic.com/firebasejs/11.0.2/firebase-app-compat.js"></script>
	<script src="https://www.gstatic.com/firebasejs/11.0.2/firebase-auth-compat.js"></script>
	<script src="https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore-compat.js"></script>
    
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <script src="config.js"></script>
    <script src="version.js"></script>

    <script>
        (function() {
            var script = document.createElement('script');
            script.src = 'guide.js?v=' + APP_VERSION;
            document.head.appendChild(script);
        })();
    </script>
    
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#9333ea">
</head>
<body class="bg-gray-100 text-gray-700">

    <nav class="bg-white shadow-md sticky top-0 z-50">
        <div id="app-lock-screen" class="fixed inset-0 bg-gradient-to-br from-purple-900 to-indigo-900 z-[70] flex flex-col items-center justify-center p-4 hidden">
            <div class="bg-white p-8 rounded-2xl shadow-2xl w-full max-w-md text-center transform transition-all scale-100">
                <div class="mb-6">
                    <div class="w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fa-solid fa-lock text-4xl text-purple-600"></i>
                    </div>
                    <h2 class="text-2xl font-bold text-gray-800">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</h2>
                    <p class="text-gray-500 mt-2">‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö-‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</p>
                </div>
                
                <form id="unlock-form" class="space-y-4">
					<div class="relative">
						<input type="password" id="unlock-password" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô" class="w-full text-center text-2xl tracking-widest py-3 px-4 bg-gray-50 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-purple-200 focus:border-purple-500 outline-none transition-all" required
						autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false">
					</div>
					
					<button type="submit" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-4 px-6 rounded-xl shadow-lg transition duration-300 text-lg flex items-center justify-center gap-2">
						<i class="fa-solid fa-door-open"></i> ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
					</button>

					<button type="button" id="btn-bio-unlock" class="w-full bg-white border-2 border-purple-200 hover:bg-purple-50 text-purple-700 font-bold py-3 px-6 rounded-xl transition duration-300 text-lg flex items-center justify-center gap-2 hidden">
						<i class="fa-solid fa-fingerprint text-2xl"></i> ‡∏™‡πÅ‡∏Å‡∏ô‡∏•‡∏≤‡∏¢‡∏ô‡∏¥‡πâ‡∏ß‡∏°‡∏∑‡∏≠ / ‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤
					</button>
				</form>
                <p class="mt-6 text-xs text-gray-400">¬© 2025 Finance Manager Pro</p>
            </div>
        </div>

        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="text-xl font-bold text-purple-600">
                <i class="fa-solid fa-wallet mr-2"></i>
                <span>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö-‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</span>
            </div>

            <div class="md:hidden flex items-center gap-2">
			<i id="status-cloud-mobile" class="fa-solid fa-cloud text-gray-300 text-lg mr-1 transition-colors duration-300" title="‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞"></i>
                <button id="mobile-home-button" class="text-purple-600 hover:text-purple-800 p-2 rounded-lg">
                    <i class="fa-solid fa-house text-2xl"></i> 
                </button>
                <button id="mobile-menu-button" class="text-purple-600 hover:text-purple-800 p-2 rounded-lg">
                    <i id="mobile-menu-icon" class="fa-solid fa-bars text-2xl"></i>
                </button>
            </div>

            <div id="desktop-menu" class="hidden md:flex md:items-center md:gap-2">
				<i id="status-cloud-desktop" class="fa-solid fa-cloud text-gray-300 text-lg mr-2 transition-colors duration-300 cursor-help" title="‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞"></i>
                <button id="nav-home" class="text-purple-600 hover:text-purple-800 font-medium px-4 py-3 rounded-lg text-lg"><i class="fa-solid fa-house mr-1"></i> ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
                <button id="nav-list" class="text-gray-600 hover:text-purple-800 font-medium px-4 py-3 rounded-lg text-lg"><i class="fa-solid fa-list-ul mr-1"></i> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
                <button id="nav-calendar" class="text-gray-600 hover:text-purple-800 font-medium px-4 py-3 rounded-lg text-lg"><i class="fa-solid fa-calendar-days mr-1"></i> ‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô</button>
                <button id="nav-accounts" class="text-gray-600 hover:text-purple-800 font-medium px-4 py-3 rounded-lg text-lg"><i class="fa-solid fa-wallet mr-1"></i> ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</button>
                <button id="nav-settings" class="text-gray-600 hover:text-purple-800 font-medium px-4 py-3 rounded-lg text-lg"><i class="fa-solid fa-gear mr-1"></i> ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</button>
                <button id="nav-guide" class="text-gray-600 hover:text-purple-800 font-medium px-4 py-3 rounded-lg text-lg"><i class="fa-solid fa-book mr-1"></i> ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠</button>
            </div>
        </div>

        <div id="mobile-menu" class="md:hidden hidden bg-white shadow-lg">
            <button id="nav-home-mobile" class="block w-full text-left text-purple-600 hover:bg-purple-100 font-medium px-6 py-4 text-lg border-b border-gray-100"><i class="fa-solid fa-house mr-2"></i> ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
            <button id="nav-list-mobile" class="block w-full text-left text-gray-600 hover:bg-purple-100 font-medium px-6 py-4 text-lg border-b border-gray-100"><i class="fa-solid fa-list-ul mr-2"></i> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
            <button id="nav-calendar-mobile" class="block w-full text-left text-gray-600 hover:bg-purple-100 font-medium px-6 py-4 text-lg border-b border-gray-100"><i class="fa-solid fa-calendar-days mr-2"></i> ‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô</button>
            <button id="nav-accounts-mobile" class="block w-full text-left text-gray-600 hover:bg-purple-100 font-medium px-6 py-4 text-lg border-b border-gray-100"><i class="fa-solid fa-wallet mr-2"></i> ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</button>
            <button id="nav-settings-mobile" class="block w-full text-left text-gray-600 hover:bg-purple-100 font-medium px-6 py-4 text-lg border-b border-gray-100"><i class="fa-solid fa-gear mr-2"></i> ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</button>
            <button id="nav-guide-mobile" class="block w-full text-left text-gray-600 hover:bg-purple-100 font-medium px-6 py-4 text-lg"><i class="fa-solid fa-book mr-2"></i> ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠</button>
        </div>
    </nav>


    <div id="main-content" class="container mx-auto p-4 md:p-6">
        <header id="shared-controls-header" class="flex flex-col md:flex-row justify-end items-center mb-6 gap-4" style="display: none;">
            <div class="flex flex-wrap justify-center md:justify-end items-center gap-3 bg-white p-4 rounded-xl shadow-lg">
                <select id="view-mode-select" class="form-select text-lg text-gray-700 bg-gray-50 border-0 rounded-lg focus:ring-purple-500 focus:border-purple-500">
                    <option value="all">‡∏î‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                    <option value="month">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</option>
                    <option value="year">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏õ‡∏µ</option>
                </select>
                <div id="month-controls" class="flex items-center gap-1">
                    <button id="month-prev" class="px-4 py-3 bg-gray-200 hover:bg-purple-200 rounded-lg"><i class="fa-solid fa-chevron-left"></i></button>
                    <input type="month" id="month-picker" class="form-input text-lg text-gray-700 bg-gray-50 border-0 rounded-lg focus:ring-purple-500 focus:border-purple-500 w-auto">
                    <button id="month-next" class="px-4 py-3 bg-gray-200 hover:bg-purple-200 rounded-lg"><i class="fa-solid fa-chevron-right"></i></button>
                </div>
                <div id="year-controls" class="flex items-center gap-1 hidden">
                    <button id="year-prev" class="px-4 py-3 bg-gray-200 hover:bg-purple-200 rounded-lg"><i class="fa-solid fa-chevron-left"></i></button>
                    <input type="number" id="year-picker" class="form-input text-lg text-gray-700 bg-gray-50 border-0 rounded-lg focus:ring-purple-500 focus:border-purple-500 w-28 text-center" placeholder="YYYY">
                    <button id="year-next" class="px-4 py-3 bg-gray-200 hover:bg-purple-200 rounded-lg"><i class="fa-solid fa-chevron-right"></i></button>
                </div>
            </div>
        </header>
        
        <div id="page-wrapper" class="page-container">
            <div id="page-home" class="app-page">
                <div id="summary-cards-container" class="grid grid-cols-3 gap-2 md:gap-6 mb-6">
                    <div id="summary-income-card" class="bg-green-100 p-3 md:p-6 rounded-xl shadow-lg cursor-pointer hover:shadow-xl transition duration-200">
                        <h2 class="text-sm md:text-lg font-semibold text-green-800 mb-1 md:mb-2">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</h2>
                        <p id="total-income" class="text-base md:text-2xl font-bold text-green-700">‡∏ø0.00</p>
                    </div>
                    <div id="summary-expense-card" class="bg-red-100 p-3 md:p-6 rounded-xl shadow-lg cursor-pointer hover:shadow-xl transition duration-200">
                        <h2 class="text-sm md:text-lg font-semibold text-red-800 mb-1 md:mb-2">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</h2>
                        <p id="total-expense" class="text-base md:text-2xl font-bold text-red-700">‡∏ø0.00</p>
                    </div>
                    <div id="summary-balance-card" class="bg-blue-100 p-3 md:p-6 rounded-xl shadow-lg cursor-pointer hover:shadow-xl transition duration-200">
                        <h2 class="text-sm md:text-lg font-semibold text-blue-800 mb-1 md:mb-2">‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠(‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î/‡∏≠‡∏≠‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå)</h2>
                        <p id="total-balance" class="text-base md:text-2xl font-bold text-blue-800">‡∏ø0.00</p>
                    </div>
                </div>
				
				<div id="home-budget-widget" class="bg-white p-5 md:p-6 rounded-xl shadow-lg mb-6 hidden">
					<div class="flex justify-between items-center mb-4">
						<h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">
							<i class="fa-solid fa-bullseye text-red-500"></i> ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢ (‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ)
						</h2>
						<button id="btn-go-budget-settings" class="text-sm text-purple-600 hover:underline">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
					</div>
					<div id="budget-list-container" class="space-y-4">
						</div>
				</div>

                <div class="bg-white p-5 md:p-6 rounded-xl shadow-lg mb-6">
                    <div class="flex justify-between items-center cursor-pointer settings-toggle-header" data-target="home-accounts-content">
                        <h2 class="text-xl font-bold text-purple-600">‡∏™‡∏£‡∏∏‡∏õ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
                        <i class="fa-solid fa-chevron-down text-green-500 transition-transform duration-300 rotate-180"></i>
                    </div>

                    <div id="home-accounts-content" class="mt-4 transition-all">
                        <div id="all-accounts-summary" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 sm:gap-4">
                            <p class="text-gray-500">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏ö‡∏±‡∏ç‡∏ä‡∏µ...</p>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6"> 

                    <div class="lg:col-span-1 bg-white p-3 md:p-6 rounded-xl shadow-lg flex flex-col justify-center lg:order-1">
						<h2 class="text-lg md:text-xl font-bold text-purple-600 mb-2 md:mb-4">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</h2>
						<p class="text-base md:text-lg text-gray-700 mb-4 md:mb-6">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏à‡∏≥‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏•‡∏∞‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</p>
						
						<button id="add-tx-btn" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 md:py-3 px-4 rounded-xl shadow-lg transition duration-300 text-base md:text-lg">
							<i class="fa-solid fa-plus mr-2"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏´‡∏°‡πà
						</button>

						<button id="add-img-btn" class="w-full bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 md:py-3 px-4 rounded-xl shadow-lg transition duration-300 text-base md:text-lg mt-3 md:mt-4">
							<i class="fa-solid fa-image mr-2"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
						</button>
						<input type="file" id="home-receipt-input" accept="image/*" class="hidden">

						<button id="voice-add-btn" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 md:py-3 px-4 rounded-xl shadow-lg transition duration-300 text-base md:text-lg mt-3 md:mt-4">
							<i class="fa-solid fa-microphone mr-2"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏™‡∏µ‡∏¢‡∏á
						</button>
						<button onclick="openQuickDraftModal()" class="w-full bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 md:py-3 px-4 rounded-xl shadow-lg transition duration-300 text-base md:text-lg mt-3 md:mt-4 mb-4">
							<i class="fa-solid fa-bolt mr-2"></i> ‡∏à‡∏î‡∏î‡πà‡∏ß‡∏ô (Draft)
						</button>
					</div>
                    
                    <div class="lg:col-span-2 bg-white p-3 md:p-6 rounded-xl shadow-lg lg:order-2">
                        <h2 class="text-lg md:text-xl font-bold text-purple-600 mb-2 md:mb-4">‡∏™‡∏£‡∏∏‡∏õ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°</h2>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 items-center">
                            <div>
                                <h3 class="text-base md:text-lg font-semibold text-center text-gray-700 mb-2">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö / ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</h3>
                                <div class="h-48 md:h-72 relative">
                                    <canvas id="transaction-chart"></canvas>
                                    <p id="chart-no-data" class="absolute inset-0 flex items-center justify-center text-gray-500 hidden">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>
                                </div>
                            </div>
                            <div>
                                <h3 class="text-base md:text-lg font-semibold text-center text-gray-700 mb-2">‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏ï‡∏≤‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Top 10)</h3>
                                <div class="h-48 md:h-72 relative">
                                    <canvas id="expense-category-chart"></canvas>
                                    <p id="expense-chart-no-data" class="absolute inset-0 flex items-center justify-center text-gray-500 hidden">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> 
				
				<div id="home-drafts-container" class="bg-white dark:bg-gray-800 p-5 md:p-6 rounded-xl shadow-lg mb-6 hidden border-l-8 border-yellow-400 dark:border-yellow-500 transition-colors duration-300">
					<h2 class="text-lg font-bold text-yellow-700 dark:text-yellow-400 mb-3 flex items-center">
						<i class="fa-solid fa-clipboard-list mr-2"></i> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ (Drafts)
					</h2>
					<div id="drafts-list" class="space-y-2"></div>
				</div>
				
				<div id="home-transaction-list-container" class="bg-white p-5 md:p-6 rounded-xl shadow-lg mt-6"> 
                    <div class="flex justify-between items-center cursor-pointer settings-toggle-header" data-target="home-transactions-content">
                        <h2 class="text-xl font-bold text-purple-600">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h2>
                        <i class="fa-solid fa-chevron-down text-green-500 transition-transform duration-300 text-xl"></i>
                    </div>

                    <div id="home-transactions-content" class="mt-4 transition-all">
                        <div class="flex flex-col md:flex-row gap-4 mb-4">
                            <div class="flex-shrink-0">
                                <select id="home-items-per-page-select" class="form-select text-lg text-gray-700 bg-gray-50 border border-gray-200 rounded-xl focus:ring-purple-500 focus:border-purple-500 py-3 px-4 h-full">
                                    <option value="10">‡πÅ‡∏™‡∏î‡∏á 10</option>
                                    <option value="20">‡πÅ‡∏™‡∏î‡∏á 20</option>
                                    <option value="50">‡πÅ‡∏™‡∏î‡∏á 50</option>
                                </select>
                            </div>
                            <div class="flex-shrink-0 flex gap-2 justify-center md:justify-start" id="home-filter-buttons">
                                <button class="home-filter-btn bg-purple-500 text-white px-5 py-3 text-base rounded-xl" data-filter="all">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                                <button class="home-filter-btn bg-gray-200 text-gray-700 px-5 py-3 text-base rounded-xl" data-filter="income">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</button>
                                <button class="home-filter-btn bg-gray-200 text-gray-700 px-5 py-3 text-base rounded-xl" data-filter="expense">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</button>
                                <button class="home-filter-btn bg-gray-200 text-gray-700 px-5 py-3 text-base rounded-xl" data-filter="transfer">‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢</button>
                            </div>
                        </div>
                        <div id="home-table-placeholder" class="overflow-x-auto"></div>
                        <div id="home-pagination-controls" class="flex justify-center items-center gap-2 mt-4"></div>
                    </div>
                </div>
            </div> 
        
            <div id="page-list" class="app-page hidden">
				<div id="transaction-list-container" class="bg-white p-4 md:p-6 rounded-xl shadow-lg pb-24"> <h2 class="text-xl font-bold text-purple-600 mb-4 flex items-center">
						<i class="fa-solid fa-filter mr-2"></i> ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå (Advanced Filter)
					</h2>

					<div class="bg-gray-50 p-4 rounded-xl border border-gray-200 mb-4 space-y-3">
						
						<div class="grid grid-cols-2 gap-3">
							<div>
								<label class="block text-xs font-bold text-gray-500 mb-1 ml-1">‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
								<input type="date" id="adv-filter-start" class="w-full p-2 text-sm bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none text-gray-700">
							</div>
							<div>
								<label class="block text-xs font-bold text-gray-500 mb-1 ml-1">‡∏ñ‡∏∂‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
								<input type="date" id="adv-filter-end" class="w-full p-2 text-sm bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none text-gray-700">
							</div>
						</div>

						<div class="grid grid-cols-3 gap-3">
							<div class="col-span-1">
								<label class="block text-xs font-bold text-gray-500 mb-1 ml-1">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</label>
								<select id="adv-filter-type" class="w-full p-2 text-sm bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none text-gray-700 h-[38px]">
									<option value="all">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
									<option value="income">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</option>
									<option value="expense">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</option>
									<option value="transfer">‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢</option>
								</select>
							</div>
							<div class="col-span-2">
								<label class="block text-xs font-bold text-gray-500 mb-1 ml-1">‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ (‡∏ä‡∏∑‡πà‡∏≠/‡∏´‡∏°‡∏ß‡∏î/Note)</label>
								<div class="relative">
									<input type="text" id="adv-filter-search" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏ä‡πà‡∏ô '7-11' ‡∏´‡∏£‡∏∑‡∏≠ '‡∏Å‡∏≤‡πÅ‡∏ü'" class="w-full p-2 pl-8 text-sm bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none text-gray-700 h-[38px]">
									<i class="fa-solid fa-magnifying-glass absolute left-3 top-2.5 text-gray-400"></i>
									<button id="btn-clear-search" class="absolute right-2 top-1 text-gray-400 hover:text-gray-600 p-1 hidden">
										<i class="fa-solid fa-times-circle"></i>
									</button>
								</div>
							</div>
						</div>

						<div class="bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-gray-900 dark:to-gray-800 border border-purple-100 dark:border-gray-700 rounded-lg p-3 mt-2 transition-colors duration-200">
							<div class="flex justify-between items-center text-xs text-gray-500 mb-2">
								<span><i class="fa-solid fa-chart-simple mr-1"></i>‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î (‡∏ï‡∏≤‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏´‡πá‡∏ô)</span>
								
								<div id="analytics-section" class="mt-4 mb-6 hidden">
									<div class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full">
										
										<div class="bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-xl shadow-sm p-3 h-80 flex flex-col transition-colors duration-200">
											<h3 class="text-sm font-bold text-gray-700 dark:text-gray-200 mb-2 flex items-center gap-2 flex-shrink-0">
												<i class="fa-solid fa-chart-pie text-purple-500"></i> ‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
											</h3>
											<div class="relative w-full flex-grow min-h-0">
												<canvas id="chart-category"></canvas>
											</div>
										</div>

										<div class="bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-xl shadow-sm p-3 h-80 flex flex-col transition-colors duration-200">
											<h3 class="text-sm font-bold text-gray-700 dark:text-gray-200 mb-2 flex items-center gap-2 flex-shrink-0">
												<i class="fa-solid fa-chart-column text-blue-500"></i> ‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤
											</h3>
											<div class="relative w-full flex-grow min-h-0">
												<canvas id="chart-time"></canvas>
											</div>
										</div>

									</div>
								</div>
								
								<span id="dyn-count-display" class="bg-white px-2 py-0.5 rounded-full border border-gray-200">0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
							</div>
							<div class="grid grid-cols-3 gap-2 text-center divide-x divide-gray-200">
								<div>
									<div class="text-[10px] text-gray-500">‡∏£‡∏ß‡∏°‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</div>
									<div id="dyn-sum-income" class="text-sm md:text-base font-bold text-green-600">0</div>
								</div>
								<div>
									<div class="text-[10px] text-gray-500">‡∏£‡∏ß‡∏°‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</div>
									<div id="dyn-sum-expense" class="text-sm md:text-base font-bold text-red-600">0</div>
								</div>
								<div>
									<div class="text-[10px] text-gray-500">‡∏™‡∏∏‡∏ó‡∏ò‡∏¥</div>
									<div id="dyn-sum-net" class="text-sm md:text-base font-bold text-blue-600">0</div>
								</div>
							</div>
						</div>
					</div>

					<div class="flex justify-between items-center mb-2 gap-2">
						<h3 class="font-bold text-gray-700 flex-grow">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</h3>
						
						<button id="btn-export-filtered" class="bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1.5 rounded-lg shadow flex items-center gap-2 transition-colors">
							<i class="fa-solid fa-file-excel"></i> <span class="hidden sm:inline">Export Excel</span>
						</button>

						<select id="items-per-page-select" class="text-xs bg-gray-100 border-0 rounded-lg py-1 px-2 text-gray-600">
							<option value="10">10 / ‡∏´‡∏ô‡πâ‡∏≤</option>
							<option value="50">50 / ‡∏´‡∏ô‡πâ‡∏≤</option>
							<option value="100">100 / ‡∏´‡∏ô‡πâ‡∏≤</option>
							<option value="9999">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
						</select>
					</div>

					<div id="list-table-placeholder" class="overflow-x-auto min-h-[300px]"></div>
					<div id="list-pagination-controls" class="flex justify-center items-center gap-2 mt-4 pb-4"></div>
				</div>
			</div>
            
            <div id="page-calendar" class="app-page hidden">
				<div class="bg-white p-5 md:p-6 rounded-xl shadow-lg">
					<h1 class="text-xl md:text-2xl font-bold text-purple-600 mb-4">‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö-‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</h1>
					
					<div class="bg-gray-50 p-4 rounded-xl border border-gray-200 mb-4">
						<h3 class="font-bold text-gray-700 mb-3"><i class="fa-solid fa-layer-group mr-2"></i>‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•</h3>
						<div class="flex flex-wrap gap-4">
							<label class="inline-flex items-center cursor-pointer">
								<input type="checkbox" id="cal-toggle-holiday" class="sr-only peer" checked>
								<div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-red-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-500"></div>
								<span class="ms-3 text-sm font-medium text-gray-700">‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î</span>
							</label>

							<label class="inline-flex items-center cursor-pointer">
								<input type="checkbox" id="cal-toggle-buddhist" class="sr-only peer" checked>
								<div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-yellow-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-400"></div>
								<span class="ms-3 text-sm font-medium text-gray-700">‡∏ß‡∏±‡∏ô‡∏û‡∏£‡∏∞</span>
							</label>

							<label class="inline-flex items-center cursor-pointer">
								<input type="checkbox" id="cal-toggle-money" class="sr-only peer" checked>
								<div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-500"></div>
								<span class="ms-3 text-sm font-medium text-gray-700">‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô</span>
							</label>
						</div>
					</div>

					<div class="flex flex-col md:flex-row justify-between items-center mb-4 gap-4">
						<p class="text-lg text-gray-600">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>
						<div class="flex items-center gap-2 bg-gray-50 p-2 rounded-xl shadow-sm border border-gray-200">
							<button id="cal-prev-btn" class="w-10 h-10 flex items-center justify-center rounded-lg bg-white border border-gray-200 text-gray-600 hover:bg-purple-100 hover:text-purple-600 hover:border-purple-300 transition-colors shadow-sm">
								<i class="fa-solid fa-chevron-left"></i>
							</button>
							<div class="flex items-center">
								<label for="cal-year-input" class="mr-2 text-gray-700 font-medium">‡∏õ‡∏µ:</label>
								<input type="number" id="cal-year-input" class="form-input w-24 text-center text-lg font-bold text-purple-700 bg-white border border-gray-200 rounded-lg focus:ring-purple-500 focus:border-purple-500 py-1" placeholder="YYYY">
							</div>
							<button id="cal-next-btn" class="w-10 h-10 flex items-center justify-center rounded-lg bg-white border border-gray-200 text-gray-600 hover:bg-purple-100 hover:text-purple-600 hover:border-purple-300 transition-colors shadow-sm">
								<i class="fa-solid fa-chevron-right"></i>
							</button>
						</div>
					</div>
					
					<div id="calendar-container"></div>
				</div>
			</div>

            <div id="page-accounts" class="app-page hidden">
                <h1 class="text-xl font-bold text-purple-600 mb-6"><i class="fa-solid fa-wallet mr-2"></i>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏•‡∏∞‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</h1>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6">
                    <div class="flex flex-col gap-6">
                        <div class="bg-white p-5 md:p-6 rounded-xl shadow-lg">
                            <div class="flex justify-between items-center cursor-pointer settings-toggle-header" data-target="settings-accounts-content">
                                <h2 class="text-xl font-bold text-purple-600"><i class="fa-solid fa-wallet mr-2"></i>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</h2>
                                <i class="fa-solid fa-chevron-down text-green-500 transition-transform duration-300 rotate-180"></i>
                            </div>
                            
                            <div id="settings-accounts-content" class="mt-4 transition-all">
                                <form id="form-add-account" class="space-y-3 mb-4 p-4 bg-gray-50 rounded-lg">
                                    <h3 class="text-lg font-semibold text-purple-700">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÉ‡∏´‡∏°‡πà</h3>
                                    <div>
                                        <label for="input-account-name" class="block text-sm font-medium text-gray-700">‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</label>
                                        <input type="text" id="input-account-name" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô, ‡∏ö‡∏±‡∏ï‡∏£ KBank" class="mt-1 flex-grow form-input text-lg py-3 px-4 text-gray-700 bg-white border border-gray-200 rounded-xl focus:ring-purple-500 focus:border-purple-500 w-full" required>
                                    </div>
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label for="select-account-type" class="block text-sm font-medium text-gray-700">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</label>
                                            <select id="select-account-type" class="mt-1 w-full form-select text-lg text-gray-700 bg-white border border-gray-200 rounded-xl focus:ring-purple-500 focus:border-purple-500" required>
                                                <option value="cash">‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î/‡∏≠‡∏≠‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå/‡∏ß‡∏≠‡∏•‡πÄ‡∏•‡πá‡∏ó</option>
                                                <option value="credit">‡∏ö‡∏±‡∏ï‡∏£‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï</option>
                                                <option value="liability">‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏´‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡∏ô</option>
                                            </select>
                                        </div>
                                        
                                        <div>
                                            <label for="input-account-balance" class="block text-sm font-medium text-gray-700">‡∏¢‡∏≠‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</label>
                                            <div class="relative mt-1">
                                                <input type="text" id="input-account-balance" inputmode="decimal" placeholder="0.00 ‡∏´‡∏£‡∏∑‡∏≠ 50+20" value="0" class="flex-grow form-input text-lg py-3 px-4 text-gray-700 bg-white border border-gray-200 rounded-xl focus:ring-purple-500 focus:border-purple-500 w-full pr-12" required>
                                                <button type="button" id="toggle-account-calc-btn" class="absolute inset-y-0 right-0 flex items-center pr-3 text-purple-600 hover:text-purple-800 p-1 rounded-lg">
                                                    <i class="fa-solid fa-calculator text-xl"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <button type="submit" class="w-full bg-purple-500 hover:bg-purple-600 text-white px-4 py-3 rounded-xl font-medium text-lg"><i class="fa-solid fa-plus mr-2"></i>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</button>
                                </form>
                                <ul id="list-accounts" class="space-y-2"></ul>
                            </div>
                        </div>

                        <div class="bg-white p-5 md:p-6 rounded-xl shadow-lg">
                            <div class="flex justify-between items-center cursor-pointer" id="btn-manage-recurring">
                                <h2 class="text-xl font-bold text-purple-600"><i class="fa-solid fa-clock-rotate-left mr-2"></i> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏à‡∏≥ (Recurring)</h2>
                                <i class="fa-solid fa-chevron-down text-green-500"></i>
                            </div>
                            
                            <div id="settings-recurring-content" class="mt-4 hidden transition-all">
                                <p class="text-sm text-gray-500 mb-3">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢/‡∏£‡∏±‡∏ö ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥ (‡πÄ‡∏ä‡πà‡∏ô Netflix, ‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤, ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô) ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏∂‡∏á‡∏ß‡∏±‡∏ô</p>
                                
                                <button onclick="openRecurringModal()" class="w-full bg-indigo-500 hover:bg-indigo-600 text-white font-medium py-2 px-4 rounded-xl shadow mb-3">
                                    <i class="fa-solid fa-plus mr-2"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÉ‡∏´‡∏°‡πà
                                </button>

                                <ul id="list-recurring-rules" class="space-y-2 max-h-60 overflow-y-auto"></ul>
                            </div>
                        </div>

                        <div class="bg-white p-5 md:p-6 rounded-xl shadow-lg">
                            <div class="flex justify-between items-center cursor-pointer settings-toggle-header" data-target="settings-budget-content">
                                <h2 class="text-xl font-bold text-purple-600"><i class="fa-solid fa-sack-dollar mr-2"></i>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì (‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)</h2>
                                <i class="fa-solid fa-chevron-down text-green-500 transition-transform duration-300 rotate-180"></i>
                            </div>

                            <div id="settings-budget-content" class="mt-4 transition-all">
                                <p class="text-sm text-gray-500 mb-3">‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ß‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏ß‡∏¥‡∏ô‡∏±‡∏¢‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</p>
                                
                                <form id="form-add-budget" class="space-y-3 mb-4 p-4 bg-orange-50 rounded-lg border border-orange-100 dark:bg-gray-800 dark:border-gray-700">
                                    <div class="grid grid-cols-2 gap-3">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label>
                                            <select id="input-budget-category" class="mt-1 w-full form-select text-base rounded-xl border-gray-200" required>
                                                </select>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">‡∏ß‡∏á‡πÄ‡∏á‡∏¥‡∏ô (‡∏ö‡∏≤‡∏ó)</label>
                                            <input type="number" id="input-budget-amount" placeholder="‡πÄ‡∏ä‡πà‡∏ô 5000" class="mt-1 w-full form-input text-base rounded-xl border-gray-200" required>
                                        </div>
                                    </div>
                                    <button type="submit" class="w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-4 rounded-xl shadow transition duration-300">
                                        <i class="fa-solid fa-plus mr-2"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
                                    </button>
                                </form>

                                <ul id="list-budget-settings" class="space-y-2"></ul>
                            </div>
                        </div>
                    </div>

                    <div class="flex flex-col gap-6">
                        
                        <div class="bg-white p-5 md:p-6 rounded-xl shadow-lg">
                            <div class="flex justify-between items-center cursor-pointer settings-toggle-header" data-target="settings-manual-content">
                                <h2 class="text-xl font-bold text-purple-600"><i class="fa-solid fa-keyboard mr-2"></i>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ (Manual)</h2>
                                <i class="fa-solid fa-chevron-down text-green-500 transition-transform duration-300 rotate-180"></i>
                            </div>
                            <div id="settings-manual-content" class="mt-4 transition-all">
                                <form id="form-add-frequent-item" class="flex gap-2 mb-3">
                                    <input type="text" id="input-frequent-item" placeholder="‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£" class="flex-grow form-input text-lg py-3 px-4 text-gray-700 bg-gray-50 border border-gray-200 rounded-xl focus:ring-purple-500 focus:border-purple-500"> 
                                    <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-xl font-medium text-lg"><i class="fa-solid fa-plus"></i></button> 
                                </form>
                                <ul id="list-frequent-item" class="space-y-2"></ul>
                                <p class="text-sm text-gray-500 mt-2">* ‡∏£‡∏∞‡∏ö‡∏ö Auto-Learn ‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏¢‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏´‡∏≤‡∏Å‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ</p>
                            </div>
                        </div>

                        <div class="bg-white p-5 md:p-6 rounded-xl shadow-lg">
                            <div class="flex justify-between items-center cursor-pointer settings-toggle-header" data-target="settings-income-content">
                                <h2 class="text-xl font-bold text-purple-600"><i class="fa-solid fa-hand-holding-dollar mr-2"></i>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</h2>
                                <i class="fa-solid fa-chevron-down text-green-500 transition-transform duration-300 rotate-180"></i>
                            </div>
                            <div id="settings-income-content" class="mt-4 transition-all">
                                <form id="form-add-income-cat" class="flex gap-2 mb-3">
                                    <input type="text" id="input-income-cat" placeholder="‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö" class="flex-grow form-input text-lg py-3 px-4 text-gray-700 bg-gray-50 border border-gray-200 rounded-xl focus:ring-purple-500 focus:border-purple-500"> 
                                    <button type="submit" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-xl font-medium text-lg"><i class="fa-solid fa-plus"></i></button> 
                                </form>
                                <ul id="list-income-cat" class="space-y-2"></ul>
                            </div>
                        </div>

                        <div class="bg-white p-5 md:p-6 rounded-xl shadow-lg">
                            <div class="flex justify-between items-center cursor-pointer settings-toggle-header" data-target="settings-expense-content">
                                <h2 class="text-xl font-bold text-purple-600"><i class="fa-solid fa-cart-shopping mr-2"></i>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</h2>
                                <i class="fa-solid fa-chevron-down text-green-500 transition-transform duration-300 rotate-180"></i>
                            </div>
                            <div id="settings-expense-content" class="mt-4 transition-all">
                                <form id="form-add-expense-cat" class="flex gap-2 mb-3">
                                    <input type="text" id="input-expense-cat" placeholder="‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢" class="flex-grow form-input text-lg py-3 px-4 text-gray-700 bg-gray-50 border border-gray-200 rounded-xl focus:ring-purple-500 focus:border-purple-500"> 
                                    <button type="submit" class="bg-red-500 hover:bg-red-700 text-white px-4 py-2 rounded-xl font-medium text-lg"><i class="fa-solid fa-plus"></i></button> 
                                </form>
                                <ul id="list-expense-cat" class="space-y-2"></ul>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <div id="page-settings" class="app-page hidden">
				<h1 class="text-xl font-bold text-purple-600 mb-6"><i class="fa-solid fa-gear mr-2"></i>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</h1>
				
				<div id="install-app-container" class="mb-5 bg-gradient-to-r from-purple-500 to-indigo-600 p-4 rounded-xl shadow-lg text-white hidden">
					<div class="flex justify-between items-center">
						<div>
							<h3 class="font-bold text-lg"><i class="fa-solid fa-mobile-screen-button mr-2"></i> ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏≠‡∏õ</h3>
							<p class="text-sm text-purple-100">‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏•‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏•‡∏∑‡πà‡∏ô‡πÑ‡∏´‡∏•‡πÅ‡∏•‡∏∞‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå</p>
						</div>
						<button id="btn-install-app" class="bg-white text-purple-600 hover:bg-gray-100 font-bold py-2 px-4 rounded-lg shadow transition duration-200 text-sm whitespace-nowrap">
							‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏•‡∏¢
						</button>
					</div>
				</div>
                
                <div class="mb-5 bg-white p-4 rounded-xl shadow-sm border border-transparent transition-colors duration-200 dark:border-gray-700">
					<h3 class="mt-0 text-base font-bold text-gray-800 mb-3 flex items-center gap-2 dark:text-gray-200">
						<i class="fas fa-cloud text-blue-500"></i> ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (Cloud Sync)
					</h3>
					
					<div id="auth-container" class="flex justify-between items-center">
						<div class="flex items-center gap-3">
							<div id="user-avatar" class="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden dark:bg-gray-700 transition-colors">
								<i class="fas fa-user text-gray-500 text-lg dark:text-gray-400"></i>
							</div>
							
							<div>
								<span id="user-name-display" class="font-bold text-gray-800 text-sm block dark:text-gray-100">Guest (Offline)</span>
								<span id="user-status" class="text-xs text-gray-500 block dark:text-gray-400">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</span>
							</div>
						</div>

						<div>
							<button id="btn-login" onclick="window.loginWithGoogle()" class="bg-[#4285F4] hover:bg-[#3367d6] text-white border-0 py-2 px-4 rounded-full text-sm cursor-pointer flex items-center gap-2 transition-colors shadow-sm">
								<i class="fab fa-google"></i> <span class="hidden sm:inline">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</span>
							</button>

							<button id="btn-logout" onclick="window.logout()" class="hidden bg-red-50 text-red-600 border border-red-200 py-1 px-3 rounded-full text-xs cursor-pointer hover:bg-red-100 transition-colors dark:bg-red-900/20 dark:border-red-800 dark:text-red-400 dark:hover:bg-red-900/40">
								‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
							</button>
						</div>
					</div>
				</div>
				
				<div class="bg-white p-4 rounded-2xl shadow-sm border border-gray-100 mb-4">
					<div class="flex justify-between items-center mb-2 border-b pb-2 cursor-pointer settings-toggle-header" data-target="settings-line-content">
						<h3 class="font-bold text-gray-800">
							<i class="fa-brands fa-line text-green-500 mr-2"></i>‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô LINE
						</h3>
						<div class="flex items-center gap-2">
							<a id="line-oa-link" href="#" target="_blank" class="text-xs bg-green-100 text-green-700 px-2 py-1 rounded-lg hover:bg-green-200 transition-colors" onclick="event.stopPropagation()">
								<i class="fa-solid fa-user-plus mr-1"></i> ‡πÅ‡∏≠‡∏î‡∏ö‡∏≠‡∏ó
							</a>
							<i class="fa-solid fa-chevron-down text-green-500 transition-transform duration-300 rotate-180"></i>
						</div>
					</div>
					
					<div id="settings-line-content" class="transition-all">
					
					<div class="flex flex-col gap-2 mb-3">
					<!-- ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó -->
					<div class="mt-4 border-t border-gray-200 pt-4">
						<h4 class="font-medium text-gray-700 mb-3">‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠:</h4>
						<div class="space-y-3">
							<!-- ‡πÄ‡∏û‡∏¥‡πà‡∏° -->
							<label class="flex items-center justify-between">
								<span class="text-gray-700 dark:text-gray-300">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà</span>
								<label class="relative inline-flex items-center cursor-pointer">
									<input type="checkbox" id="notify-on-add" class="sr-only peer">
									<div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"></div>
								</label>
							</label>
							<!-- ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç -->
							<label class="flex items-center justify-between">
								<span class="text-gray-700 dark:text-gray-300">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
								<label class="relative inline-flex items-center cursor-pointer">
									<input type="checkbox" id="notify-on-edit" class="sr-only peer">
									<div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"></div>
								</label>
							</label>
							<!-- ‡∏•‡∏ö -->
							<label class="flex items-center justify-between">
								<span class="text-gray-700 dark:text-gray-300">üóëÔ∏è ‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
								<label class="relative inline-flex items-center cursor-pointer">
									<input type="checkbox" id="notify-on-delete" class="sr-only peer">
									<div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"></div>
								</label>
							</label>
						</div>
					</div>
					</div>
					
						<div class="flex flex-col gap-2 mb-3">
							<div class="flex gap-2">
								<input type="text" id="input-line-nickname" class="w-1/3 p-2 border border-gray-300 rounded-lg text-sm bg-gray-50 focus:outline-none focus:border-purple-500" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô (‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏à‡∏°‡∏™‡πå)">
								<input type="text" id="input-line-user-id" class="flex-1 p-2 border border-gray-300 rounded-lg text-sm bg-gray-50 focus:outline-none focus:border-purple-500" placeholder="User ID (U...)">
							</div>
							<button id="btn-add-line-id" class="bg-green-500 hover:bg-green-600 text-white w-full py-2 rounded-lg transition-colors font-medium text-sm">
								<i class="fa-solid fa-plus mr-1"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
							</button>
						</div>

						<div id="line-id-list" class="space-y-2"></div>

						<p class="text-xs text-gray-400 mt-2">
							<i class="fa-solid fa-circle-info mr-1"></i>‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ:
							1. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡πÅ‡∏≠‡∏î‡∏ö‡∏≠‡∏ó" ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô<br>
							2. ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ "id" ‡πÉ‡∏ô‡πÅ‡∏ä‡∏ó‡∏ö‡∏≠‡∏ó<br>
							3. ‡∏ô‡∏≥‡∏£‡∏´‡∏±‡∏™ U... ‡∏°‡∏≤‡πÉ‡∏™‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á User ID
						</p>
					</div>
				</div>
				
				<!-- ‡πÄ‡∏û‡∏¥‡πà‡∏° script ‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏ó‡πâ‡∏≤‡∏¢ body ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î DOM -->
				<script>
					// ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ LINE OA URL ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
					document.addEventListener('DOMContentLoaded', function() {
						const lineOaLink = document.getElementById('line-oa-link');
						if (lineOaLink && window.LINE_CONFIG && window.LINE_CONFIG.OA_BOT_URL) {
							lineOaLink.href = window.LINE_CONFIG.OA_BOT_URL;
						}
					});
				</script>
				
				<div class="bg-white dark:bg-gray-800 p-5 md:p-6 rounded-xl shadow-lg mb-6 border border-purple-100 dark:border-gray-700 transition-colors">
					<div class="flex justify-between items-center cursor-pointer settings-toggle-header" data-target="settings-notification-content">
						<h2 class="text-xl font-bold text-purple-600 dark:text-purple-400">
							<i class="fa-solid fa-bell mr-2"></i>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
						</h2>
						<i class="fa-solid fa-chevron-down text-green-500 transition-transform duration-300 rotate-180"></i>
					</div>

					<div id="settings-notification-content" class="mt-4 transition-all">
				
				<div class="space-y-4 mb-6">
					<div class="flex items-center justify-between">
						<span class="text-gray-700 dark:text-gray-300 text-lg">‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô "‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤" ‡∏ñ‡∏∂‡∏á‡∏Å‡∏≥‡∏´‡∏ô‡∏î</span>
						<label class="relative inline-flex items-center cursor-pointer">
							<input type="checkbox" id="toggle-notify-scheduled" class="sr-only peer">
							<div class="w-14 h-7 bg-gray-200 dark:bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-900 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-purple-600"></div>
						</label>
					</div>
					
					<div class="flex items-center justify-between">
						<span class="text-gray-700 dark:text-gray-300 text-lg">‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô "‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏à‡∏≥" (Recurring)</span>
						<label class="relative inline-flex items-center cursor-pointer">
							<input type="checkbox" id="toggle-notify-recurring" class="sr-only peer">
							<div class="w-14 h-7 bg-gray-200 dark:bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-900 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-purple-600"></div>
						</label>
					</div>

					<div class="flex items-center justify-between">
						<span class="text-gray-700 dark:text-gray-300 text-lg">‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô "‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì" ‡πÉ‡∏Å‡∏•‡πâ‡∏´‡∏°‡∏î (>80%)</span>
						<label class="relative inline-flex items-center cursor-pointer">
							<input type="checkbox" id="toggle-notify-budget" class="sr-only peer">
							<div class="w-14 h-7 bg-gray-200 dark:bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-900 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-purple-600"></div>
						</label>
					</div>
				</div>

				<hr class="border-gray-200 dark:border-gray-700 my-4">

				<h3 class="font-bold text-gray-800 dark:text-gray-200 mb-3"><i class="fa-solid fa-pen-to-square mr-2"></i>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©</h3>
				<div class="bg-gray-50 dark:bg-gray-700/50 p-4 rounded-xl space-y-3 transition-colors">
					<div>
						<label class="block text-sm text-gray-600 dark:text-gray-300 mb-1">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</label>
						<input type="text" id="custom-notify-msg" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 transition-colors" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå">
					</div>
					<div class="grid grid-cols-2 gap-4">
						<div>
							<label class="block text-sm text-gray-600 dark:text-gray-300 mb-1">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</label>
							<input type="date" id="custom-notify-date" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 transition-colors">
						</div>
						<div>
							<label class="block text-sm text-gray-600 dark:text-gray-300 mb-1">‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤ (‡∏ß‡∏±‡∏ô)</label>
							<input type="number" id="custom-notify-days" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 transition-colors" value="0" min="0">
						</div>
					</div>
						
						<div class="mt-3 border-t border-gray-200 dark:border-gray-600 pt-3">
							<label class="block text-sm text-gray-600 dark:text-gray-300 mb-2 font-bold">‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</label>
							<div class="flex flex-wrap items-center gap-4">
								<label class="inline-flex items-center cursor-pointer">
									<input type="radio" name="notify-time-type" value="all1day" class="form-radio text-purple-600 w-4 h-4" checked>
									<span class="ml-2 text-sm text-gray-700 dark:text-gray-300">‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô</span>
								</label>
								<label class="inline-flex items-center cursor-pointer">
									<input type="radio" name="notify-time-type" value="specific" class="form-radio text-purple-600 w-4 h-4">
									<span class="ml-2 text-sm text-gray-700 dark:text-gray-300">‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤</span>
								</label>

								<div class="ml-auto md:ml-4 flex items-center gap-2">
									<label class="text-sm text-gray-600 dark:text-gray-400 font-bold hidden sm:block"><i class="fa-solid fa-rotate mr-1"></i>‡∏ó‡∏≥‡∏ã‡πâ‡∏≥:</label>
									<select id="custom-notify-repeat" class="text-sm bg-gray-50 border border-gray-300 text-gray-700 rounded-lg focus:ring-purple-500 focus:border-purple-500 block p-1.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
										<option value="none">‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥ (‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß)</option>
										<option value="weekly">‡∏ó‡∏∏‡∏Å‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</option>
										<option value="monthly">‡∏ó‡∏∏‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</option>
										<option value="yearly">‡∏ó‡∏∏‡∏Å‡∏õ‡∏µ</option>
									</select>
								</div>
								</div>
							
							<div id="notify-time-input-wrapper" class="hidden mt-2">
								<input type="time" id="custom-notify-time" class="w-full p-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 transition-colors">
							</div>
						</div>
						
						<div id="notify-time-input-wrapper" class="hidden mt-2">
							<input type="time" id="custom-notify-time" class="w-full p-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 transition-colors">
						</div>
					</div>
					
					<button id="btn-save-custom-notify" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 rounded-xl shadow transition duration-300 mt-2">
						‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
					</button>
					
					<div id="active-custom-notify-list" class="mt-4 space-y-2"></div>
					<div class="flex justify-end mb-2">
						<button id="btn-clear-custom-expired" class="text-xs text-red-500 hover:text-red-700 font-bold border border-red-200 bg-red-50 hover:bg-red-100 px-3 py-1 rounded-lg transition-colors">
							<i class="fa-solid fa-broom mr-1"></i> ‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß
						</button>
					</div>

					<div id="active-custom-notify-list" class="..."></div>
				</div>

				<hr class="border-gray-200 dark:border-gray-700 my-6">

							<div class="space-y-3">
								<div class="flex justify-between items-center">
									<h3 class="font-bold text-gray-800 text-lg">
										<i class="fa-solid fa-clock-rotate-left mr-2 text-gray-500"></i>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
									</h3>
									<button id="btn-clear-history" class="text-xs text-red-500 hover:text-red-700 bg-red-50 px-2 py-1 rounded-lg">
										‡∏•‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥
									</button>
								</div>
								
								<button id="btn-toggle-history" class="w-full py-2 bg-gray-100 hover:bg-gray-200 text-gray-600 rounded-lg text-sm font-bold transition">
									‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏≤
								</button>

								<div id="notification-history-list" class="hidden space-y-2 max-h-60 overflow-y-auto mt-2 pr-1">
									<p class="text-center text-gray-400 py-4 text-sm">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</p>
								</div>
							</div>
					</div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6">
                    <div class="flex flex-col gap-6">
                        <div class="bg-white p-5 md:p-6 rounded-xl shadow-lg mt-0">
                            <h2 class="text-xl font-bold text-purple-600 mb-4"><i class="fa-solid fa-sliders mr-2"></i>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</h2>
                                    
									<div class="mb-5 pb-4 border-b border-gray-100">
										<div class="flex items-center justify-between mb-2">
											<div class="flex items-center gap-3">
												<div class="w-10 h-10 rounded-full bg-rose-100 flex items-center justify-center text-rose-600">
													<i class="fa-solid fa-fingerprint"></i>
												</div>
												<span class="text-lg text-gray-700 font-medium">‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏î‡πâ‡∏ß‡∏¢ Biometric</span>
											</div>
											
											<button id="btn-biometric-settings" class="bg-gray-200 text-gray-600 px-4 py-2 rounded-lg text-sm font-bold hover:bg-gray-300 transition-colors">
												‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
											</button>
										</div>
										<p id="bio-status-text" class="text-sm text-gray-500 mt-2 ml-14">‡πÉ‡∏ä‡πâ‡∏•‡∏≤‡∏¢‡∏ô‡∏¥‡πâ‡∏ß‡∏°‡∏∑‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏ó‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ)</p>
									</div>
									
									
									<div class="flex items-center justify-between mt-5"> <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center text-green-600">
                                            <i class="fa-solid fa-wand-magic-sparkles"></i>
                                        </div>
                                        <span class="text-lg text-gray-700 font-medium">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</span>
                                    </div>
									
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="toggle-auto-confirm-password" class="sr-only peer">
                                        <div class="w-14 h-7 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-purple-600"></div>
                                    </label>
                                </div>
                                <p class="text-sm text-gray-500 mt-2 ml-14">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</p>
                            <div class="mb-5 pb-4">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600">
                                            <i class="fa-solid fa-user-lock"></i>
                                        </div>
                                        <span class="text-lg text-gray-700 font-medium">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Auto Lock</span>
                                    </div>
                                    
                                    <select id="auto-lock-select" class="form-select text-base text-gray-700 bg-gray-50 border border-gray-200 rounded-xl focus:ring-purple-500 focus:border-purple-500 py-2 px-3">
                                        <option value="0">‡∏õ‡∏¥‡∏î</option>
                                        <option value="1">1 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                        <option value="5">5 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                        <option value="10">10 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                        <option value="30">30 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                        <option value="60">60 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                    </select>
                                </div>
                                <p class="text-sm text-gray-500 mt-2 ml-14">‡∏•‡πá‡∏≠‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° (‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô)</p>
                            </div>
                            <div class="mb-5 pb-4">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center text-yellow-600">
                                            <i class="fa-solid fa-moon"></i>
                                        </div>
                                        <span class="text-lg text-gray-700 font-medium">Dark Mode</span>
                                    </div>
                                    
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="toggle-dark-mode" class="sr-only peer">
                                        <div class="w-14 h-7 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-purple-600"></div>
                                    </label>
                                </div>
                                <p class="text-sm text-gray-500 mt-2 ml-14">‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ò‡∏µ‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏î‡∏≥‡∏™‡∏ô‡∏¥‡∏ó‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ñ‡∏ô‡∏≠‡∏°‡∏™‡∏≤‡∏¢‡∏ï‡∏≤</p>
                            </div>
							
							<!-- ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ -->
							<div class="mb-5 pb-4 border-b border-gray-100 dark:border-gray-700">
								<div class="flex items-center justify-between mb-2">
									<div class="flex items-center gap-3">
										<div class="w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center text-purple-600">
											<i class="fa-solid fa-bars"></i>
										</div>
										<span class="text-lg text-gray-700 font-medium">‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠</span>
									</div>
								</div>
								<div class="ml-14 space-y-2">
									<label class="flex items-center gap-2">
										<input type="radio" name="mobile-menu-style" value="hamburger" class="form-radio text-purple-600">
										<span class="text-gray-700 dark:text-gray-300">‡πÄ‡∏°‡∏ô‡∏π‡πÅ‡∏Æ‡∏°‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÄ‡∏Å‡∏≠‡∏£‡πå (‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏≤‡∏°‡∏Ç‡∏µ‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π)</span>
									</label>
									<label class="flex items-center gap-2">
										<input type="radio" name="mobile-menu-style" value="bottom" class="form-radio text-purple-600">
										<span class="text-gray-700 dark:text-gray-300">‡πÄ‡∏°‡∏ô‡∏π‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á (‡∏Å‡∏î‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏±‡∏ô‡∏ó‡∏µ)</span>
									</label>
								</div>
								<p class="text-sm text-gray-500 mt-2 ml-14">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ñ‡∏ô‡∏±‡∏î (‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ)</p>
							</div>

                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600">
                                        <i class="fa-solid fa-eye"></i>
                                    </div>
                                    <span class="text-lg text-gray-700 font-medium">‡πÅ‡∏™‡∏î‡∏á‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏£‡∏ß‡∏° (‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å)</span>
                                </div>
                                
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="toggle-show-balance" class="sr-only peer">
                                    <div class="w-14 h-7 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-purple-600"></div>
                                </label>
                            </div>
                            <p class="text-sm text-gray-500 mt-2 ml-14">‡∏´‡∏≤‡∏Å‡∏õ‡∏¥‡∏î ‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ã‡πà‡∏≠‡∏ô‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</p>
                        </div>
						
						<!-- ‡∏™‡πà‡∏ß‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ -->
						<div class="bg-white dark:bg-gray-800 p-5 md:p-6 rounded-xl shadow-lg mb-6">
							<div class="flex justify-between items-center cursor-pointer settings-toggle-header" data-target="settings-voice-commands-content">
								<h2 class="text-xl font-bold text-purple-600 dark:text-purple-400">
									<i class="fa-solid fa-microphone mr-2"></i> ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ
								</h2>
								<i class="fa-solid fa-chevron-down text-green-500 transition-transform duration-300 rotate-180"></i>
							</div>
							<div id="settings-voice-commands-content" class="mt-4 transition-all">
								<div class="flex justify-end mb-3">
									<button onclick="openVoiceCommandModal()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl text-sm font-bold shadow-md transition flex items-center gap-2">
										<i class="fa-solid fa-plus"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡∏°‡πà
									</button>
								</div>
								<div id="voice-commands-list" class="space-y-2 max-h-80 overflow-y-auto"></div>
								<button id="btn-clear-all-voice" class="mt-3 text-sm text-red-500 hover:text-red-700 border border-red-200 bg-red-50 hover:bg-red-100 px-3 py-1 rounded-lg transition-colors">
									<i class="fa-solid fa-broom mr-1"></i> ‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
								</button>
							</div>
						</div>

                        <div class="mb-4 p-4 bg-white rounded-lg border border-gray-200 shadow-sm">
							<div class="flex items-center justify-between mb-4">
								<div class="flex items-center gap-3">
									<div class="w-10 h-10 rounded-full bg-pink-100 flex items-center justify-center text-pink-600">
										<i class="fa-solid fa-font"></i>
									</div>
									<span class="text-lg text-gray-700 font-medium">‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£</span>
								</div>
								<span id="fontLabelDisplay" class="text-blue-600 bg-blue-100 px-3 py-1 rounded-full text-sm">‡∏õ‡∏Å‡∏ï‡∏¥</span>
							</div>
							
							<div class="relative w-full px-1 mb-4">
								<input type="range" id="fontSizeSlider" min="0" max="5" step="1" value="2" 
									   class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600 block">
								
								<div class="relative w-full h-6 mt-2 text-xs text-gray-400 font-medium">
									<span class="absolute left-0 top-0" style="left: 0%;">‡πÄ‡∏•‡πá‡∏Å‡∏™‡∏∏‡∏î‡πÜ</span>
									<span class="absolute top-0 -translate-x-1/2" style="left: 20%;">‡πÄ‡∏•‡πá‡∏Å</span>
									<span class="absolute top-0 -translate-x-1/2" style="left: 40%;">‡∏õ‡∏Å‡∏ï‡∏¥</span>
									<span class="absolute top-0 -translate-x-1/2" style="left: 60%;">‡πÉ‡∏´‡∏ç‡πà</span>
									<span class="absolute top-0 -translate-x-1/2" style="left: 80%;">‡πÉ‡∏´‡∏ç‡πà‡∏°‡∏≤‡∏Å</span>
									<span class="absolute right-0 top-0" style="left: 100%; transform: translateX(-100%);">‡πÉ‡∏´‡∏ç‡πà‡∏™‡∏∏‡∏î‡πÜ</span>
								</div>
							</div>

							<button id="btnSaveFontSize" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-xl shadow transition duration-300">
								<i class="fa-solid fa-save mr-2"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
							</button>
							<p class="text-xs text-gray-400 text-center mt-2">* ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏°‡∏µ‡∏ú‡∏•</p>
						</div>
                    </div>

                    <div class="flex flex-col gap-6">
                        <div class="bg-white p-5 md:p-6 rounded-xl shadow-lg">
                            <h2 class="text-xl font-bold text-purple-600 mb-4"><i class="fa-solid fa-database mr-2"></i>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h2>
                            <button id="btn-manage-password" class="w-full bg-purple-500 hover:bg-purple-600 text-white font-medium py-3 px-4 rounded-xl shadow-lg transition duration-300 mb-4 text-lg"> <i class="fa-solid fa-key mr-2"></i> ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
                            </button>
                            <div class="grid grid-cols-2 gap-4 mb-4">
                                <button id="btn-undo" class="bg-yellow-500 hover:bg-yellow-600 text-white font-medium py-3 px-4 rounded-xl shadow-lg transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed text-lg"> <i class="fa-solid fa-rotate-left mr-2"></i> ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö
                            </button>
                            <button id="btn-redo" class="bg-yellow-500 hover:bg-yellow-600 text-white font-medium py-3 px-4 rounded-xl shadow-lg transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed text-lg"> <i class="fa-solid fa-rotate-right mr-2"></i> ‡∏ó‡∏≥‡∏ã‡πâ‡∏≥
                                </button>
                            </div>

                            <div class="grid grid-cols-2 gap-4 mb-4">
                                <button id="btn-backup" class="bg-blue-700 hover:bg-blue-800 text-white font-medium py-2 px-4 rounded-xl shadow-lg transition duration-300 text-lg h-auto"> 
                                    <div class="flex flex-col items-center leading-tight">
										<span><i class="fa-solid fa-vault mr-2"></i> ‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</span>
										<span class="text-xs font-normal opacity-80 mt-1">JSON / Excel / Cloud</span>
                                    </div>
                                </button>

                                <button id="btn-import" class="bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 rounded-xl shadow-lg transition duration-300 text-lg h-auto"> 
                                    <div class="flex flex-col items-center leading-tight">
                                        <span><i class="fa-solid fa-download mr-2"></i> ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</span>
                                        <span class="text-xs font-normal opacity-80 mt-1">(‡∏à‡∏≤‡∏Å‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå)</span>
                                    </div>
                                </button>
                                <input type="file" id="import-file-input" class="hidden" accept=".json">
									<div class="col-span-2 mt-2 pt-2 border-t border-gray-200">
										<!-- ‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï (‡∏¢‡πâ‡∏≤‡∏¢‡∏°‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô) -->
										<button id="btn-system-update" class="w-full bg-gradient-to-r from-orange-400 to-pink-500 hover:from-orange-500 hover:to-pink-600 text-white font-medium py-3 px-4 rounded-xl shadow-lg transition duration-300 text-lg mb-3">
											<i class="fa-solid fa-rotate mr-2 animate-spin-slow"></i> ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î / ‡∏•‡πâ‡∏≤‡∏á‡πÅ‡∏Ñ‡∏ä
										</button>

										<!-- ‡∏õ‡∏∏‡πà‡∏° Hard Reset (‡πÄ‡∏î‡∏¥‡∏°) -->
										<button id="btn-hard-reset" class="w-full bg-slate-700 hover:bg-slate-800 text-white font-medium py-3 px-4 rounded-xl shadow-lg transition duration-300 text-lg">
											<i class="fa-solid fa-power-off text-red-400 mr-2"></i> ‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏Å‡πâ‡πÅ‡∏≠‡∏õ‡∏Ñ‡πâ‡∏≤‡∏á ‡πÅ‡∏≠‡∏õ‡∏û‡∏±‡∏á ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ (Hard Reset)
										</button>
									</div>

                                <button id="btn-clear-all" class="col-span-2 bg-red-600 hover:bg-red-700 text-white font-medium py-3 px-4 rounded-xl shadow-lg transition duration-300 text-lg"> <i class="fa-solid fa-trash-alt mr-2"></i> ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÅ‡∏•‡∏∞‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        
            <div id="page-guide" class="app-page hidden">
				<!-- ‡∏à‡∏∞‡πÉ‡∏™‡πà‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢ JavaScript -->
			</div>
			
        </div> 
    </div> 
    
    <footer class="text-center p-6 text-gray-600 text-base">
		¬© 2025 Finance Manager Pro 
		<span id="version-display"></span>
		Cloud<span id="app-status-display"></span> | 
		Developed by James IT
	</footer>

    <div id="form-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-[60]">
        <div class="bg-white p-6 rounded-xl shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto relative">
            <div class="flex justify-between items-center mb-4">
                <h2 id="modal-title" class="text-xl font-bold text-purple-600">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà</h2>
                <button id="modal-close-btn" class="text-gray-400 hover:text-red-500 text-4xl w-12 h-12 flex items-center justify-center rounded-full hover:bg-gray-100 transition-all absolute top-2 right-2 md:static md:w-auto md:h-auto md:hover:bg-transparent">
                    &times;
                </button>
            </div>
            
            <form id="transaction-form" class="space-y-4">
                <input type="hidden" id="tx-id">
                <div>
                <label class="block text-lg text-gray-700 font-medium mb-2">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</label>
                
                <div class="flex flex-row gap-4 items-center">
                    
                    <label class="flex items-center flex-shrink-0">
                        <input type="radio" id="tx-type-income" name="tx-type" value="income" class="form-radio text-green-500 focus:ring-green-500" checked>
                        <span class="ml-2 text-lg text-green-700">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</span>
                    </label>
                    <label class="flex items-center flex-shrink-0">
                        <input type="radio" id="tx-type-expense" name="tx-type" value="expense" class="form-radio text-red-500 focus:ring-red-500">
                        <span class="ml-2 text-lg text-red-700">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</span>
                    </label>
                    <label class="flex items-center flex-shrink-0">
                        <input type="radio" id="tx-type-transfer" name="tx-type" value="transfer" class="form-radio text-blue-500 focus:ring-blue-500">
                        <span class="ml-2 text-lg text-blue-700">‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢</span>
                    </label>
                    
                </div>
            </div>

                <div id="tx-account-container">
                    <label for="tx-account" class="block text-lg text-gray-700 font-medium mb-2">‡∏ö‡∏±‡∏ç‡∏ä‡∏µ <span class="text-red-500">*</span></label>
                    <select id="tx-account" class="w-full form-select text-lg text-gray-700 bg-gray-50 border border-gray-200 rounded-xl focus:ring-purple-500 focus:border-purple-500" required>
                    </select>
                </div>

                <div id="tx-account-from-container" class="hidden">
                    <label for="tx-account-from" class="block text-lg text-gray-700 font-medium mb-2">‡πÇ‡∏≠‡∏ô‡∏à‡∏≤‡∏Å <span class="text-red-500">*</span></label>
                    <select id="tx-account-from" class="w-full form-select text-lg text-gray-700 bg-gray-50 border border-gray-200 rounded-xl focus:ring-purple-500 focus:border-purple-500" required>
                        </select>
                </div>

                <div id="tx-account-to-container" class="hidden">
                    <label for="tx-account-to" class="block text-lg text-gray-700 font-medium mb-2">‡πÇ‡∏≠‡∏ô‡πÑ‡∏õ <span class="text-red-500">*</span></label>
                    <select id="tx-account-to" class="w-full form-select text-lg text-gray-700 bg-gray-50 border border-gray-200 rounded-xl focus:ring-purple-500 focus:border-purple-500" required>
                        </select>
                </div>
   
                <div id="tx-name-container">
                    <div class="flex justify-between items-center mb-2">
                        <label for="tx-name" class="block text-lg text-gray-700 font-medium mb-0">‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ <span class="text-red-500">*</span></label>
                        <div class="flex items-center gap-2">
                            <button type="button" id="modal-attach-btn" class="text-teal-500 hover:text-teal-700 p-1 rounded-lg" title="‡πÅ‡∏ô‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û">
								<i class="fa-solid fa-image text-xl"></i>
							</button>
							<button type="button" id="modal-voice-btn" class="text-blue-500 hover:text-blue-700 p-1 rounded-lg" title="‡∏û‡∏π‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•">
                                <i class="fa-solid fa-microphone text-xl"></i>
                            </button>
                            <button type="button" id="toggle-favorite-btn" class="text-gray-400 hover:text-yellow-500 p-1 rounded-lg" title="‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡∏î">
                                <i class="fa-solid fa-star text-xl"></i>
                            </button>
                        </div>
                        </div>
                    <input list="frequent-items-datalist" id="tx-name" class="w-full form-input text-lg text-gray-700 bg-gray-50 border border-gray-200 rounded-xl focus:ring-purple-500 focus:border-purple-500" required autocomplete="off">
                    <p id="auto-fill-hint" class="text-xs text-green-600 mt-1 hidden"><i class="fa-solid fa-magic-wand-sparkles"></i> ‡πÄ‡∏ï‡∏¥‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß</p>
                    <datalist id="frequent-items-datalist">
                    </datalist>
                </div>

                <div id="tx-category-container">
                    <label for="tx-category" class="block text-lg text-gray-700 font-medium mb-2">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà <span class="text-red-500">*</span></label>
                    <select id="tx-category" class="w-full form-select text-lg text-gray-700 bg-gray-50 border border-gray-200 rounded-xl focus:ring-purple-500 focus:border-purple-500" required>
                    </select>
                </div>

                <div class="relative">
                     <div class="flex justify-between items-center mb-2">
                        <label for="tx-amount" class="block text-lg text-gray-700 font-medium mb-0">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô (‡∏ö‡∏≤‡∏ó) <span class="text-red-500">*</span></label>
                        <button type="button" id="toggle-calc-btn" class="text-purple-600 hover:text-purple-800 p-1 rounded-lg">
                            <i class="fa-solid fa-calculator text-xl"></i>
                        </button>
                    </div>
                    <input type="text" id="tx-amount" inputmode="decimal" placeholder="0.00 ‡∏´‡∏£‡∏∑‡∏≠ 50+20" class="w-full form-input text-lg text-gray-700 bg-gray-50 border border-gray-200 rounded-xl focus:ring-purple-500 focus:border-purple-500" required>
                    <input type="hidden" id="hidden-draft-id">
                </div>

                <div>
                   <label for="tx-date" class="block text-lg text-gray-700 font-medium mb-2">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà <span class="text-red-500">*</span></label>
                    <input type="datetime-local" id="tx-date" class="w-full form-input text-lg text-gray-700 bg-gray-50 border border-gray-200 rounded-xl focus:ring-purple-500 focus:border-purple-500" required>
                </div>
                
                <div>
                    <label for="tx-receipt-file" class="block text-lg text-gray-700 font-medium mb-2">‡πÅ‡∏ô‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û/‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)</label>
                    <div class="flex items-center space-x-3">
                        <input type="file" id="tx-receipt-file" accept="image/*" class="w-full text-sm text-gray-700
                            file:mr-4 file:py-2 file:px-4
                            file:rounded-full file:border-0
                            file:text-sm file:font-semibold
                            file:bg-purple-50 file:text-purple-700
                            hover:file:bg-purple-100"
                        >
                        <button type="button" id="clear-receipt-btn" class="text-red-500 hover:text-red-700 p-2 hidden">
                            <i class="fa-solid fa-circle-xmark text-xl"></i>
                        </button>
                    </div>
                    <div id="receipt-preview-container" class="mt-3 hidden">
                        <img id="receipt-preview" class="max-w-xs max-h-40 rounded-lg shadow-md border border-gray-200 object-cover cursor-pointer hover:shadow-lg transition-shadow" alt="Receipt Preview">
                    </div>
                </div>
                <div>
                 <label for="tx-desc" class="block text-lg text-gray-700 font-medium mb-2">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)</label>
                    <textarea id="tx-desc" rows="3" class="w-full form-textarea text-lg text-gray-700 bg-gray-50 border border-gray-200 rounded-xl focus:ring-purple-500 focus:border-purple-500"></textarea>
                </div>

				<div class="mt-4 p-3 bg-indigo-50 rounded-xl border border-indigo-100 dark:bg-gray-800 dark:border-gray-700 transition-colors">
					<div class="flex items-center justify-between cursor-pointer" id="toggle-recurring-section">
						<div class="flex items-center gap-2">
							<div class="bg-indigo-100 p-1.5 rounded-lg text-indigo-600 dark:bg-indigo-900/50 dark:text-indigo-300">
								<i class="fa-solid fa-clock-rotate-left"></i>
							</div>
							<span class="text-indigo-900 font-medium text-lg dark:text-indigo-100">‡∏ó‡∏≥‡∏ã‡πâ‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ (Recurring)</span>
						</div>
						<label class="relative inline-flex items-center cursor-pointer">
							<input type="checkbox" id="tx-is-recurring" class="sr-only peer">
							<div class="w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 dark:peer-focus:ring-indigo-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600 dark:bg-gray-600 dark:peer-checked:bg-indigo-500"></div>
						</label>
					</div>

					<div id="tx-recurring-options" class="hidden mt-3 pt-3 border-t border-indigo-200 dark:border-gray-700">
						<div class="grid grid-cols-1 gap-3">
							<div>
								<label class="block text-sm text-indigo-800 font-medium mb-1 dark:text-indigo-200">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà (Frequency)</label>
								<select id="tx-recurring-freq" class="w-full form-select text-base bg-white border border-indigo-200 rounded-lg text-indigo-700 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-indigo-400">
									<option value="monthly" selected>‡∏ó‡∏∏‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</option>
									<option value="weekly">‡∏ó‡∏∏‡∏Å‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</option>
									<option value="daily">‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô</option>
									<option value="yearly">‡∏ó‡∏∏‡∏Å‡∏õ‡∏µ</option>
								</select>
							</div>
							<p class="text-xs text-indigo-500 dark:text-indigo-400">
								* ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏∂‡∏á‡∏£‡∏≠‡∏ö‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
							</p>
						</div>
					</div>
				</div>

                <div class="flex justify-end gap-4 pt-4">
                 <button type="button" id="modal-cancel-btn" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-3 px-6 rounded-xl text-lg">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button> <button type="submit" class="bg-purple-600 hover:bg-purple-700 text-white font-medium py-3 px-6 rounded-xl shadow-lg text-lg">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button> </div>
            </form>
        </div>
    </div>
    
    <div id="account-form-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-[60]">
        <div class="bg-white p-6 rounded-xl shadow-lg w-full max-w-lg max-h-[90vh] overflow-y-auto relative">
            <div class="flex justify-between items-center mb-4">
                <h2 id="account-modal-title" class="text-xl font-bold text-purple-600">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</h2>
                <button id="account-modal-close-btn" class="text-gray-400 hover:text-red-500 text-4xl w-12 h-12 flex items-center justify-center rounded-full hover:bg-gray-100 transition-all absolute top-2 right-2 md:static md:w-auto md:h-auto md:hover:bg-transparent">
                    &times;
                </button>
            </div>
            <form id="account-form" class="space-y-4">
                <input type="hidden" id="edit-account-id">
                <div>
                    <label for="edit-account-name" class="block text-lg text-gray-700 font-medium mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</label>
                    <input type="text" id="edit-account-name" class="w-full form-input text-lg text-gray-700 bg-gray-50 border border-gray-200 rounded-xl" required>
                </div>
                <div>
                    <label for="edit-account-type" class="block text-lg text-gray-700 font-medium mb-2">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</label>
                    <select id="edit-account-type" class="w-full form-select text-lg text-gray-700 bg-gray-50 border border-gray-200 rounded-xl" required>
                        <option value="cash">‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î/‡∏≠‡∏≠‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå/‡∏ß‡∏≠‡∏•‡πÄ‡∏•‡πá‡∏ó</option>
                        <option value="credit">‡∏ö‡∏±‡∏ï‡∏£‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï</option>
                        <option value="liability">‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏´‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡∏ô</option>
                    </select>
                </div>
                <div>
                    <label for="edit-account-balance" class="block text-lg text-gray-700 font-medium mb-2">‡∏¢‡∏≠‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (Initial Balance)</label>
                    
                    <div class="relative">
                        <input type="text" id="edit-account-balance" inputmode="decimal" value="0" class="w-full form-input text-lg text-gray-700 bg-gray-50 border border-gray-200 rounded-xl pr-12" required>
                        <button type="button" id="toggle-edit-account-calc-btn" class="absolute inset-y-0 right-0 flex items-center pr-3 text-purple-600 hover:text-purple-800 p-1 rounded-lg">
                            <i class="fa-solid fa-calculator text-xl"></i>
                        </button>
                    </div>
                    
                    <p class="text-sm text-gray-500 mt-1">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏¢‡∏≠‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏à‡∏∞‡∏™‡πà‡∏á‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</p>
                </div>
				
				<div class="mt-6 pt-4 border-t border-gray-200">
                    <h3 class="text-base font-bold text-gray-700 mb-3 flex items-center">
                        <i class="fa-solid fa-calculator text-orange-500 mr-2"></i> ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô (‡πÄ‡∏ä‡πà‡∏ô ‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢)
                    </h3>
                    <div class="bg-orange-50 p-4 rounded-xl border border-orange-100">
                        <div class="flex justify-between items-center mb-3">
                            <span class="text-sm text-gray-600">‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:</span>
                            <span id="modal-current-balance-display" class="font-bold text-xl text-blue-600">0.00</span>
                        </div>
                        
                        <div class="flex gap-2 mb-3">
                            <button type="button" id="btn-adj-type-inc" class="flex-1 py-2 px-3 rounded-lg border bg-green-500 text-white border-green-600 shadow-sm transition-all text-sm font-bold">
                                <i class="fa-solid fa-plus"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏° (‡∏£‡∏±‡∏ö)
                            </button>
                            <button type="button" id="btn-adj-type-exp" class="flex-1 py-2 px-3 rounded-lg border bg-white text-gray-600 border-gray-300 shadow-sm transition-all text-sm hover:bg-gray-50">
                                <i class="fa-solid fa-minus"></i> ‡∏•‡∏î (‡∏à‡πà‡∏≤‡∏¢)
                            </button>
                        </div>
                        <input type="hidden" id="adjust-tx-type" value="income">

                        <div class="grid grid-cols-1 gap-2">
                            <input type="number" id="adjust-tx-amount" step="0.01" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô (‡πÄ‡∏ä‡πà‡∏ô 10.50)" class="w-full form-input text-base rounded-lg border-gray-200 focus:ring-orange-500 focus:border-orange-500">
                            <input type="text" id="adjust-tx-desc" placeholder="‡∏£‡∏∞‡∏ö‡∏∏: ‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢ / ‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏° / ‡∏õ‡∏£‡∏±‡∏ö‡∏¢‡∏≠‡∏î" class="w-full form-input text-base rounded-lg border-gray-200 focus:ring-orange-500 focus:border-orange-500">
                        </div>
                    </div>
                </div>
				
                <div class="flex justify-end gap-4 pt-4">
                    <button type="button" id="account-modal-cancel-btn" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-3 px-6 rounded-xl text-lg">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button type="submit" class="bg-purple-600 hover:bg-purple-700 text-white font-medium py-3 px-6 rounded-xl shadow-lg text-lg">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                </div>
            </form>
        </div>
    </div>
    
    <div id="account-detail-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white p-6 rounded-xl shadow-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto relative">
            <div class="flex justify-between items-start md:items-center mb-4 border-b pb-3">
                <div class="flex flex-col md:flex-row md:items-center justify-between w-full md:gap-4 pr-10 md:pr-0">
                     <h2 id="account-detail-modal-title" class="text-lg md:text-2xl font-bold text-purple-600 mb-2 md:mb-0">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°‡∏Ç‡∏≠‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ [‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ]</h2>
                     
                     <button id="add-tx-from-account-btn" class="bg-purple-600 hover:bg-purple-700 text-white font-medium py-1.5 px-3 md:py-2 md:px-4 rounded-xl shadow-md text-sm md:text-base transition duration-300 flex items-center gap-2 w-fit">
                        <i class="fa-solid fa-plus"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏´‡∏°‡πà
                     </button>
                </div>
                <button id="account-detail-modal-close-btn" class="text-gray-400 hover:text-red-500 text-4xl w-12 h-12 flex items-center justify-center rounded-full hover:bg-gray-100 transition-all absolute top-2 right-2 md:static md:w-auto md:h-auto md:hover:bg-transparent md:ml-4">
                    &times;
                </button>
            </div>
            <div class="mb-4">
                <p class="text-base md:text-lg font-medium text-gray-700">‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô: <span id="acc-detail-initial-balance" class="font-bold"></span></p>
                <p class="text-base md:text-lg font-medium text-gray-700">‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: <span id="acc-detail-current-balance" class="font-bold"></span></p>
            </div>
            <div id="acc-detail-controls-header" class="flex flex-col md:flex-row justify-end items-center mb-4 gap-4">
                <div class="flex flex-wrap justify-center md:justify-end items-center gap-3 bg-gray-50 p-3 rounded-xl shadow-inner border border-gray-200 w-full md:w-auto">
                    <select id="acc-detail-view-mode-select" class="form-select text-base text-gray-700 bg-white border-0 rounded-lg focus:ring-purple-500 focus:border-purple-500">
                        <option value="all">‡∏î‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                        <option value="month">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</option>
                        <option value="year">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏õ‡∏µ</option>
                    </select>
                    <div id="acc-detail-month-controls" class="flex items-center gap-1 hidden">
                        <button id="acc-detail-month-prev" class="px-3 py-2 bg-gray-200 hover:bg-purple-200 rounded-lg"><i class="fa-solid fa-chevron-left"></i></button>
                        <input type="month" id="acc-detail-month-picker" class="form-input text-base text-gray-700 bg-white border-0 rounded-lg focus:ring-purple-500 focus:border-purple-500 w-auto">
                        <button id="acc-detail-month-next" class="px-3 py-2 bg-gray-200 hover:bg-purple-200 rounded-lg"><i class="fa-solid fa-chevron-right"></i></button>
                    </div>
                    <div id="acc-detail-year-controls" class="flex items-center gap-1 hidden">
                        <button id="acc-detail-year-prev" class="px-3 py-2 bg-gray-200 hover:bg-purple-200 rounded-lg"><i class="fa-solid fa-chevron-left"></i></button>
                        <input type="number" id="acc-detail-year-picker" class="form-input text-base text-gray-700 bg-white border-0 rounded-lg focus:ring-purple-500 focus:border-purple-500 w-24 text-center" placeholder="YYYY">
                        <button id="acc-detail-year-next" class="px-3 py-2 bg-gray-200 hover:bg-purple-200 rounded-lg"><i class="fa-solid fa-chevron-right"></i></button>
                    </div>
                </div>
            </div>
            <div class="overflow-x-auto no-scrollbar">
                <table class="w-full text-left table-fixed"> 
                    <thead>
						<tr class="bg-gray-100 text-gray-600 text-xs uppercase">
							<th class="p-2 font-semibold">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
							
							<th class="p-2 font-semibold w-1/3">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ / ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</th> 
							
							<th class="p-2 font-semibold hidden md:table-cell">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</th>
							<th class="p-2 font-semibold text-right">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</th>
							<th class="p-2 font-semibold text-center">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
						</tr>
					</thead>
                    <tbody id="account-detail-modal-body">
                        <tr><td colspan="5" class="p-6 text-center text-gray-500">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <div id="icon-form-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-[60]">
        <div class="bg-white p-6 rounded-xl shadow-lg w-full max-w-xl max-h-[90vh] overflow-y-auto relative">
            <div class="flex justify-between items-center mb-4 border-b pb-3">
                <h2 class="text-xl font-bold text-purple-600">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ <span id="icon-acc-name"></span></h2>
                <button id="icon-modal-close-btn" class="text-gray-400 hover:text-red-500 text-4xl w-12 h-12 flex items-center justify-center rounded-full hover:bg-gray-100 transition-all absolute top-2 right-2 md:static md:w-auto md:h-auto md:hover:bg-transparent">
                    &times;
                </button>
            </div>

            <input type="hidden" id="edit-icon-account-id">
            
            <div class="mb-4">
                <div class="text-lg font-medium text-gray-700 mb-2">‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: <i id="icon-preview" class="fa-solid fa-wallet text-purple-600 text-2xl ml-2"></i></div>
                <input type="text" id="icon-search" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô..." class="w-full form-input text-lg py-3 px-4 text-gray-700 bg-gray-50 border border-gray-200 rounded-xl focus:ring-purple-500 focus:border-purple-500">
            </div>

            <div id="icon-list-container" class="grid grid-cols-6 sm:grid-cols-8 gap-2 max-h-80 overflow-y-auto p-2 bg-gray-50 rounded-xl border border-gray-200">
                </div>

            <div class="flex justify-end gap-4 pt-4">
                <button type="button" id="icon-modal-cancel-btn" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-3 px-6 rounded-xl text-lg">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button type="button" id="icon-modal-save-btn" class="bg-purple-600 hover:bg-purple-700 text-white font-medium py-3 px-6 rounded-xl shadow-lg text-lg">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
            </div>
        </div>
    </div>
    
    <div id="recurring-form-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-[65]">
		<div class="bg-white p-6 rounded-xl shadow-lg w-full max-w-lg max-h-[90vh] overflow-y-auto relative">
			<div class="flex justify-between items-center mb-4">
				<h2 class="text-xl font-bold text-purple-600">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏à‡∏≥</h2>
				<button id="rec-modal-close-btn" class="text-gray-400 hover:text-red-500 text-4xl w-12 h-12 flex items-center justify-center rounded-full hover:bg-gray-100 absolute top-2 right-2 md:static md:w-auto md:h-auto">&times;</button>
			</div>
			
			<form id="recurring-form" class="space-y-4">
				<input type="hidden" id="rec-id">
				
				<div class="flex flex-row gap-4 items-center justify-center bg-gray-50 p-2 rounded-lg">
					<label class="flex items-center cursor-pointer">
						<input type="radio" name="rec-type" value="expense" class="form-radio text-red-500 w-5 h-5" checked>
						<span class="ml-2 text-lg text-red-700 font-bold">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</span>
					</label>
					<label class="flex items-center cursor-pointer">
						<input type="radio" name="rec-type" value="income" class="form-radio text-green-500 w-5 h-5">
						<span class="ml-2 text-lg text-green-700 font-bold">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</span>
					</label>
				</div>

				<div>
					<label class="block text-gray-700 font-medium mb-1">‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (‡πÄ‡∏ä‡πà‡∏ô Netflix, ‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤)</label>
					<input type="text" id="rec-name" class="w-full form-input text-lg bg-gray-50 border border-gray-200 rounded-xl px-4 py-2" required>
				</div>
				<div class="grid grid-cols-2 gap-4">
					<div>
						<label class="block text-gray-700 font-medium mb-1">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</label>
						<input type="number" id="rec-amount" step="0.01" class="w-full form-input text-lg bg-gray-50 border border-gray-200 rounded-xl px-4 py-2" required>
					</div>
					<div>
						 <label class="block text-gray-700 font-medium mb-1">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label>
						 <select id="rec-category" class="w-full form-select text-lg bg-gray-50 border border-gray-200 rounded-xl px-4 py-2"></select>
					</div>
				</div>

				<div>
					<label class="block text-gray-700 font-medium mb-1">‡∏ï‡∏±‡∏î‡∏à‡∏≤‡∏Å/‡πÄ‡∏Ç‡πâ‡∏≤‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</label>
					<select id="rec-account" class="w-full form-select text-lg bg-gray-50 border border-gray-200 rounded-xl px-4 py-2" required></select>
				</div>

				<div class="grid grid-cols-2 gap-4 bg-indigo-50 p-3 rounded-xl border border-indigo-100">
					<div>
						<label class="block text-indigo-900 font-medium mb-1">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà (Frequency)</label>
						<select id="rec-frequency" class="w-full form-select text-lg bg-white border border-indigo-200 rounded-xl px-4 py-2 text-indigo-700">
							<option value="monthly" selected>‡∏ó‡∏∏‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</option>
							<option value="weekly">‡∏ó‡∏∏‡∏Å‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</option>
							<option value="daily">‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô</option>
							<option value="yearly">‡∏ó‡∏∏‡∏Å‡∏õ‡∏µ</option>
						</select>
					</div>
					<div>
						<label class="block text-indigo-900 font-medium mb-1">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà/‡∏à‡πà‡∏≤‡∏¢‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</label>
						<input type="date" id="rec-start-date" class="w-full form-input text-lg bg-white border border-indigo-200 rounded-xl px-4 py-2 text-indigo-700" required>
					</div>
				</div>

				<div class="flex justify-end gap-3 pt-4">
					<button type="button" id="rec-modal-cancel-btn" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-3 px-6 rounded-xl">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
					<button type="submit" class="bg-purple-600 hover:bg-purple-700 text-white font-medium py-3 px-6 rounded-xl shadow-lg">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
				</div>
			</form>
		</div>
	</div>

	<div id="calculator-popover" class="fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm hidden transition-opacity duration-300" onclick="if(event.target === this) this.classList.add('hidden')">
        <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-2xl w-full max-w-[360px] mx-4 overflow-hidden transform transition-all scale-100 border border-gray-100 dark:border-gray-700">
            <div class="bg-purple-600 p-4 flex justify-between items-center">
                <h3 class="text-white text-xl font-bold"><i class="fa-solid fa-calculator mr-2"></i>‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç</h3>
                <button type="button" onclick="document.getElementById('calculator-popover').classList.add('hidden')" class="text-white hover:text-purple-200 transition p-1">
                    <i class="fa-solid fa-xmark text-3xl"></i>
                </button>
            </div>
            <div class="p-4 bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 flex flex-col justify-end h-24">
                <div id="calc-display" class="text-right text-gray-500 text-sm h-6 break-all dark:text-gray-400"></div>
				<div id="calc-preview" class="text-right text-4xl font-bold text-gray-800 dark:text-gray-100 flex items-center justify-end tracking-wider overflow-x-auto no-scrollbar"></div>
            </div>
            <div class="p-4 grid grid-cols-4 gap-3 bg-white dark:bg-gray-800" id="calculator-grid">
                <button type="button" class="calc-btn h-16 rounded-2xl bg-red-100 text-red-600 text-2xl font-bold hover:bg-red-200 active:scale-95 transition" data-value="C">C</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-orange-100 text-orange-600 text-2xl font-bold hover:bg-orange-200 active:scale-95 transition flex items-center justify-center" data-value="backspace"><i class="fa-solid fa-delete-left"></i></button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-purple-100 text-purple-700 text-2xl font-bold hover:bg-purple-200 active:scale-95 transition" data-value="/">√∑</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-purple-100 text-purple-700 text-2xl font-bold hover:bg-purple-200 active:scale-95 transition" data-value="*">√ó</button>

                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="7">7</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="8">8</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="9">9</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-purple-100 text-purple-700 text-2xl font-bold hover:bg-purple-200 active:scale-95 transition" data-value="-">-</button>

                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="4">4</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="5">5</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="6">6</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-purple-100 text-purple-700 text-2xl font-bold hover:bg-purple-200 active:scale-95 transition" data-value="+">+</button>
                
                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="1">1</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="2">2</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="3">3</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-purple-100 text-purple-700 text-2xl font-bold hover:bg-purple-200 active:scale-95 transition" data-value="=">=</button>

				<button type="button" class="calc-btn col-span-2 h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="0">0</button>
				<button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value=".">.</button>
				
				<button type="button" class="calc-btn h-16 rounded-2xl bg-purple-600 text-white text-2xl font-bold hover:bg-purple-700 active:scale-95 transition shadow-lg flex items-center justify-center" data-value="enter">
					<i class="fa-solid fa-check"></i>
				</button>
            </div>
        </div>
    </div>

    <div id="account-calculator-popover" class="fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm hidden transition-opacity duration-300" onclick="if(event.target === this) this.classList.add('hidden')">
        <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-2xl w-full max-w-[360px] mx-4 overflow-hidden transform transition-all scale-100 border border-gray-100 dark:border-gray-700">
            <div class="bg-green-600 p-4 flex justify-between items-center">
                <h3 class="text-white text-xl font-bold"><i class="fa-solid fa-wallet mr-2"></i>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô</h3>
                <button type="button" onclick="document.getElementById('account-calculator-popover').classList.add('hidden')" class="text-white hover:text-green-200 transition p-1">
                    <i class="fa-solid fa-xmark text-3xl"></i>
                </button>
            </div>
            <div class="p-4 bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 flex flex-col justify-end h-24">
                <div id="acc-calc-display" class="text-right text-gray-500 text-sm h-6 break-all dark:text-gray-400"></div>
				<div id="acc-calc-preview" class="text-right text-4xl font-bold text-gray-800 dark:text-gray-100 flex items-center justify-end tracking-wider overflow-x-auto no-scrollbar"></div>
            </div>
            <div class="p-4 grid grid-cols-4 gap-3 bg-white dark:bg-gray-800" id="account-calculator-grid">
                <button type="button" class="calc-btn h-16 rounded-2xl bg-red-100 text-red-600 text-2xl font-bold hover:bg-red-200 active:scale-95 transition" data-value="C">C</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-orange-100 text-orange-600 text-2xl font-bold hover:bg-orange-200 active:scale-95 transition flex items-center justify-center" data-value="backspace"><i class="fa-solid fa-delete-left"></i></button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-green-100 text-green-700 text-2xl font-bold hover:bg-green-200 active:scale-95 transition" data-value="/">√∑</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-green-100 text-green-700 text-2xl font-bold hover:bg-green-200 active:scale-95 transition" data-value="*">√ó</button>

                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="7">7</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="8">8</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="9">9</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-green-100 text-green-700 text-2xl font-bold hover:bg-green-200 active:scale-95 transition" data-value="-">-</button>

                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="4">4</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="5">5</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="6">6</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-green-100 text-green-700 text-2xl font-bold hover:bg-green-200 active:scale-95 transition" data-value="+">+</button>
                
                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="1">1</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="2">2</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="3">3</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-purple-100 text-purple-700 text-2xl font-bold hover:bg-purple-200 active:scale-95 transition" data-value="=">=</button>

				<button type="button" class="calc-btn col-span-2 h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="0">0</button>
				<button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value=".">.</button>
				
				<button type="button" class="calc-btn h-16 rounded-2xl bg-purple-600 text-white text-2xl font-bold hover:bg-purple-700 active:scale-95 transition shadow-lg flex items-center justify-center" data-value="enter">
					<i class="fa-solid fa-check"></i>
				</button>
            </div>
        </div>
    </div>

    <div id="edit-account-calculator-popover" class="fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm hidden transition-opacity duration-300" onclick="if(event.target === this) this.classList.add('hidden')">
        <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-2xl w-full max-w-[360px] mx-4 overflow-hidden transform transition-all scale-100 border border-gray-100 dark:border-gray-700">
            <div class="bg-blue-600 p-4 flex justify-between items-center">
                <h3 class="text-white text-xl font-bold"><i class="fa-solid fa-pen-to-square mr-2"></i>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô</h3>
                <button type="button" onclick="document.getElementById('edit-account-calculator-popover').classList.add('hidden')" class="text-white hover:text-blue-200 transition p-1">
                    <i class="fa-solid fa-xmark text-3xl"></i>
                </button>
            </div>
            <div class="p-4 bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 flex flex-col justify-end h-24">
                <div id="edit-acc-calc-display" class="text-right text-gray-500 text-sm h-6 break-all dark:text-gray-400"></div>
				<div id="edit-acc-calc-preview" class="text-right text-4xl font-bold text-gray-800 dark:text-gray-100 flex items-center justify-end tracking-wider overflow-x-auto no-scrollbar"></div>
            </div>
            <div class="p-4 grid grid-cols-4 gap-3 bg-white dark:bg-gray-800" id="edit-account-calculator-grid">
                <button type="button" class="calc-btn h-16 rounded-2xl bg-red-100 text-red-600 text-2xl font-bold hover:bg-red-200 active:scale-95 transition" data-value="C">C</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-orange-100 text-orange-600 text-2xl font-bold hover:bg-orange-200 active:scale-95 transition flex items-center justify-center" data-value="backspace"><i class="fa-solid fa-delete-left"></i></button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-blue-100 text-blue-700 text-2xl font-bold hover:bg-blue-200 active:scale-95 transition" data-value="/">√∑</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-blue-100 text-blue-700 text-2xl font-bold hover:bg-blue-200 active:scale-95 transition" data-value="*">√ó</button>

                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="7">7</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="8">8</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="9">9</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-blue-100 text-blue-700 text-2xl font-bold hover:bg-blue-200 active:scale-95 transition" data-value="-">-</button>

                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="4">4</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="5">5</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="6">6</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-blue-100 text-blue-700 text-2xl font-bold hover:bg-blue-200 active:scale-95 transition" data-value="+">+</button>
                
                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="1">1</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="2">2</button>
                <button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="3">3</button>
                
                <button type="button" class="calc-btn h-16 rounded-2xl bg-purple-100 text-purple-700 text-2xl font-bold hover:bg-purple-200 active:scale-95 transition" data-value="=">=</button>

				<button type="button" class="calc-btn col-span-2 h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value="0">0</button>
				<button type="button" class="calc-btn h-16 rounded-2xl bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white text-2xl font-bold hover:bg-gray-200 active:scale-95 transition" data-value=".">.</button>
				
				<button type="button" class="calc-btn h-16 rounded-2xl bg-purple-600 text-white text-2xl font-bold hover:bg-purple-700 active:scale-95 transition shadow-lg flex items-center justify-center" data-value="enter">
					<i class="fa-solid fa-check"></i>
				</button>
            </div>
        </div>
    </div>
		<div id="notification-modal" class="fixed inset-0 bg-black/80 z-[90] flex items-center justify-center p-4 hidden backdrop-blur-sm transition-opacity duration-300">
		<div class="bg-white rounded-3xl shadow-2xl w-full max-w-2xl overflow-hidden transform scale-100 transition-transform duration-300">
			<div class="bg-gradient-to-r from-purple-600 to-indigo-600 p-6 flex items-center gap-4">
				<div class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center animate-bounce">
					<i class="fa-solid fa-bell text-4xl text-white"></i>
				</div>
				<div>
					<h2 class="text-3xl font-bold text-white">‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</h2>
					<p class="text-purple-100 text-lg">‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</p>
				</div>
			</div>
			
			<div id="notification-content" class="p-8 space-y-4 max-h-[60vh] overflow-y-auto">
				</div>

			<div class="p-6 bg-gray-50 border-t border-gray-100 flex flex-col sm:flex-row gap-4">
				<button id="btn-notify-ack" class="flex-1 bg-purple-600 hover:bg-purple-700 text-white text-xl font-bold py-4 px-6 rounded-2xl shadow-lg transition transform active:scale-95">
					‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö
				</button>
				<button id="btn-notify-ignore" class="flex-1 bg-white border-2 border-gray-300 text-gray-500 hover:bg-gray-100 text-lg font-bold py-4 px-6 rounded-2xl transition">
					‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏≠‡∏µ‡∏Å
				</button>
			</div>
		</div>
	</div>
	
	<div id="quick-draft-modal" class="fixed inset-0 bg-black/60 dark:bg-black/80 flex items-center justify-center p-4 hidden z-[80] backdrop-blur-sm">
		<div class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-2xl w-full max-w-sm transform scale-100 transition-all border border-gray-100 dark:border-gray-700">
			
			<div class="flex justify-between items-center mb-6 pb-2 border-b border-gray-100 dark:border-gray-700">
				<h2 class="text-2xl font-bold text-yellow-600 dark:text-yellow-400 flex items-center">
					<i class="fa-solid fa-bolt mr-3 text-yellow-500"></i>‡∏à‡∏î‡∏î‡πà‡∏ß‡∏ô
				</h2>
				<button onclick="closeQuickDraftModal()" class="w-10 h-10 flex items-center justify-center rounded-full bg-gray-100 dark:bg-gray-700 hover:bg-red-100 dark:hover:bg-red-900 text-gray-500 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 text-2xl font-bold transition-all shadow-sm">
					<i class="fa-solid fa-xmark"></i>
				</button>
			</div>
			
			<div class="space-y-5">
				<div>
					<label class="block text-gray-700 dark:text-gray-300 font-bold mb-2 text-lg">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</label>
					<div class="relative">
						<input type="number" id="draft-amount" 
							   class="w-full text-4xl font-black text-center py-4 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white border-2 border-yellow-300 dark:border-yellow-600 rounded-2xl focus:ring-4 focus:ring-yellow-100 dark:focus:ring-yellow-900 focus:border-yellow-500 outline-none placeholder-gray-300 dark:placeholder-gray-500 transition-all" 
							   placeholder="0">
					</div>
				</div>

				<div class="flex justify-center">
					<button id="btn-draft-voice" onclick="startQuickDraftVoice()" 
							class="flex items-center gap-2 px-5 py-2.5 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-full text-base font-bold border border-gray-300 dark:border-gray-600 hover:bg-gray-200 dark:hover:bg-gray-600 transition-all active:scale-95 shadow-sm">
						<i class="fa-solid fa-microphone"></i> ‡∏û‡∏π‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏î
					</button>
				</div>

				<div>
					<label class="block text-gray-700 dark:text-gray-300 font-bold mb-2 text-lg">‡∏Å‡∏±‡∏ô‡∏•‡∏∑‡∏° (Note)</label>
					<input type="text" id="draft-note" 
						   class="w-full py-3 px-4 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600 rounded-xl text-xl focus:border-yellow-500 dark:focus:border-yellow-500 outline-none transition-all placeholder-gray-400" 
						   placeholder="‡∏Ñ‡πà‡∏≤‡∏≠‡∏∞‡πÑ‡∏£...">
				</div>
				
				<button onclick="saveQuickDraft()" class="w-full bg-yellow-500 hover:bg-yellow-600 dark:bg-yellow-600 dark:hover:bg-yellow-700 text-white font-black py-4 rounded-xl shadow-lg text-xl transition-transform active:scale-95 mt-2">
					‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô
				</button>
			</div>
		</div>
	</div>
	
	<!-- Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏≠‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á -->
	<div id="voice-command-modal" class="fixed inset-0 bg-black/60 flex items-center justify-center p-4 hidden z-[85] backdrop-blur-sm">
		<div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto p-6">
			<div class="flex justify-between items-center mb-6 pb-2 border-b border-gray-100 dark:border-gray-700">
				<h2 class="text-2xl font-bold text-purple-600 dark:text-purple-400 flex items-center gap-2">
					<i class="fa-solid fa-microphone-lines"></i>
					<span id="voice-modal-title">‡∏™‡∏≠‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡∏°‡πà</span>
				</h2>
				<button onclick="closeVoiceCommandModal()" class="text-gray-400 hover:text-red-500 text-3xl w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition">
					&times;
				</button>
			</div>

			<form id="voice-command-form" class="space-y-4">
				<input type="hidden" id="voice-command-id">

				<!-- ‡∏Ñ‡∏≥‡∏û‡∏π‡∏î -->
				<div>
					<label class="block text-gray-700 dark:text-gray-300 font-medium mb-1">üó£Ô∏è ‡∏Ñ‡∏≥‡∏û‡∏π‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏à‡∏≥ <span class="text-red-500">*</span></label>
					<div class="relative">
						<input type="text" id="voice-command-text" class="w-full p-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 pr-12" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏õ‡∏¥‡∏î‡∏ö‡∏±‡∏ç‡∏ä‡∏µ, ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô" required>
						<button type="button" id="btn-voice-command-mic" class="absolute inset-y-0 right-0 flex items-center pr-3 text-purple-600 hover:text-purple-800 dark:text-purple-400">
							<i class="fa-solid fa-microphone text-xl"></i>
						</button>
					</div>
					<p class="text-xs text-gray-400 mt-1">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ï‡πâ‡∏≠‡∏á‡∏û‡∏π‡∏î‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏µ‡πâ ‡∏£‡∏∞‡∏ö‡∏ö‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡∏ó‡∏≥‡∏ï‡∏≤‡∏°</p>
				</div>

				<!-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Action -->
				<div>
					<label class="block text-gray-700 dark:text-gray-300 font-medium mb-1">üéØ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Action ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ó‡∏≥ <span class="text-red-500">*</span></label>
					<select id="voice-command-action" class="w-full p-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500" required>
						<option value="">-- ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å --</option>
						<optgroup label="üì± ‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡∏ó‡∏≤‡∏á">
							<!-- options ‡πÄ‡∏î‡∏¥‡∏° -->
							<option value="openPage">‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤ (Home, ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£, ‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô, ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ, ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤, ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠)</option>
							<option value="openSettingsSection">‡πÄ‡∏õ‡∏¥‡∏î‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏ô‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ (‡∏ò‡∏µ‡∏°, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢, ‡∏Ø‡∏•‡∏Ø)</option>
							<!-- NEW: ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á -->
							<option value="openAccountsPage">‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</option>
							<option value="openBudgetSettings">‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì</option>
							<option value="openRecurringSettings">‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏à‡∏≥</option>
						</optgroup>

						<optgroup label="‚öôÔ∏è ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏î‡πà‡∏ß‡∏ô">
							<!-- options ‡πÄ‡∏î‡∏¥‡∏° -->
							<option value="toggleDarkMode">‡∏™‡∏•‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î‡∏°‡∏∑‡∏î/‡∏™‡∏ß‡πà‡∏≤‡∏á</option>
							<option value="toggleBalanceVisibility">‡πÅ‡∏™‡∏î‡∏á/‡∏ã‡πà‡∏≠‡∏ô‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠</option>
							<option value="backupData">‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</option>
							<option value="changePassword">‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</option>
							<!-- NEW: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° -->
							<option value="exportData">‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (JSON/Excel)</option>
							<option value="importData">‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</option>
							<option value="systemUpdate">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô / ‡∏•‡πâ‡∏≤‡∏á‡πÅ‡∏Ñ‡∏ä</option>
							<option value="clearAllData">‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
							<option value="hardReset">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏£‡∏∞‡∏ö‡∏ö (Hard Reset)</option>
							<option value="lockApp">‡∏•‡πá‡∏≠‡∏Ñ‡πÅ‡∏≠‡∏õ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</option>
						</optgroup>
						<optgroup label="‚Ü©Ô∏è ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£">
							<option value="undo">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Undo)</option>
							<option value="redo">‡∏ó‡∏≥‡∏ã‡πâ‡∏≥ (Redo)</option>
						</optgroup>
						<optgroup label="üìù ‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°">
							<option value="addTransaction">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (‡∏£‡∏∞‡∏ö‡∏∏‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô)</option>
							<option value="quickDraft">‡∏à‡∏î‡∏î‡πà‡∏ß‡∏ô</option>
						</optgroup>
						<optgroup label="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤/‡∏Å‡∏£‡∏≠‡∏á">
							<option value="search">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ (‡∏£‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏≥‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô)</option>
							<option value="filterByType">‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó (‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö/‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢)</option>
							<option value="applyTimeFilter">‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤</option>
						</optgroup>
					</select>
				</div>

				<!-- Dynamic fields (‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≤‡∏° action ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å) -->
				<div id="voice-command-dynamic-fields" class="space-y-3 bg-gray-50 dark:bg-gray-700/50 p-4 rounded-xl border border-gray-200 dark:border-gray-600">
					<!-- JavaScript ‡∏à‡∏∞‡πÅ‡∏ó‡∏£‡∏Å‡∏ü‡∏¥‡∏•‡∏î‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ -->
					<p class="text-sm text-gray-500 dark:text-gray-400 italic">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Action ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</p>
				</div>

				<!-- ‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å/‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å -->
				<div class="flex justify-end gap-3 pt-4">
					<button type="button" onclick="closeVoiceCommandModal()" class="bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-white px-6 py-2 rounded-xl font-medium transition">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
					<button type="submit" class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-xl font-medium shadow-lg transition">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á</button>
				</div>
			</form>
		</div>
	</div>
	
    <!-- GLOBAL FLOATING VOICE BUTTON (NEW) -->
	<div class="fixed bottom-28 right-5 z-[999]">
		<button id="smart-voice-btn" onclick="activateGlobalVoice()" 
				class="w-14 h-14 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-full shadow-xl flex items-center justify-center transition-all transform hover:scale-110 active:scale-90 border-2 border-white voice-ring group">
			<i class="fa-solid fa-microphone text-xl group-hover:animate-pulse"></i>
		</button>
	</div>
	
	<!-- Bottom Navigation (‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠) -->
	<div id="bottom-nav" class="fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 grid grid-cols-6 items-center py-1 z-40 hidden md:hidden shadow-lg">
		<button data-page="home" class="flex flex-col items-center text-purple-600">
			<i class="fa-solid fa-house text-lg"></i>
			<span class="text-[10px] mt-0.5">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</span>
		</button>
		<button data-page="list" class="flex flex-col items-center text-gray-600">
			<i class="fa-solid fa-list-ul text-lg"></i>
			<span class="text-[10px] mt-0.5">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
		</button>
		<button data-page="calendar" class="flex flex-col items-center text-gray-600">
			<i class="fa-solid fa-calendar-days text-lg"></i>
			<span class="text-[10px] mt-0.5">‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô</span>
		</button>
		<button data-page="accounts" class="flex flex-col items-center text-gray-600">
			<i class="fa-solid fa-wallet text-lg"></i>
			<span class="text-[10px] mt-0.5">‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</span>
		</button>
		<button data-page="settings" class="flex flex-col items-center text-gray-600">
			<i class="fa-solid fa-gear text-lg"></i>
			<span class="text-[10px] mt-0.5">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</span>
		</button>
		<button data-page="guide" class="flex flex-col items-center text-gray-600">
			<i class="fa-solid fa-book text-lg"></i>
			<span class="text-[10px] mt-0.5">‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠</span>
		</button>
	</div>
	
     <!-- Firebase module script -->
    <script type="module">
		// 1. Import Library
		import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
		import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-auth.js";
		import { getFirestore, collection, addDoc, setDoc, doc, deleteDoc, updateDoc, query, where, onSnapshot, orderBy, getDocs } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore.js";

		// 2. ‡πÉ‡∏ä‡πâ Config ‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå config.js
		const app = initializeApp(window.FIREBASE_CONFIG);
		const auth = getAuth(app);
		const db = getFirestore(app);
		const provider = new GoogleAuthProvider();

		// 3. Export to Window (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°)
		window.db = db;
		window.auth = auth;
		window.dbCollection = collection;
		window.dbAddDoc = addDoc;
		window.dbSetDoc = setDoc;
		window.dbDoc = doc;
		window.dbDelete = deleteDoc;
		window.dbUpdate = updateDoc;
		window.dbQuery = query;
		window.dbWhere = where;
		window.dbOrderBy = orderBy;
		window.dbOnSnapshot = onSnapshot;
		window.dbGetDocs = getDocs;

		// 4. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Login (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°)
		window.loginWithGoogle = () => {
			signInWithPopup(auth, provider)
				.then((result) => {
					const Toast = Swal.mixin({
						toast: true, position: "top-end", showConfirmButton: false, timer: 1500,
						customClass: { popup: document.body.classList.contains('dark') ? 'swal2-toast' : '' },
						background: document.body.classList.contains('dark') ? '#1a1a1a' : '#fff',
						color: document.body.classList.contains('dark') ? '#e5e7eb' : '#545454',
					});
					Toast.fire({ icon: "success", title: "‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à" }).then(() => {
						window.location.reload();
					});
				}).catch((error) => {
					console.error("Login Error:", error);
					Swal.fire('‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', error.message, 'error');
				});
		};

		// 5. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Logout (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°)
		window.logout = async () => {
			// ... (‡∏Ñ‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏¥‡∏°‡πÑ‡∏ß‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î) ...
			const isDark = document.body.classList.contains('dark');

			if (typeof window.verifyPasswordForLogout === 'function') {
				const authorized = await window.verifyPasswordForLogout();
				if (!authorized) return;
			}

			Swal.fire({
				title: '‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö?',
				text: "‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡πà‡∏≤ (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏ô Cloud ‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà)",
				icon: 'warning',
				showCancelButton: true,
				confirmButtonColor: '#d33',
				confirmButtonText: '‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö',
				cancelButtonText: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å',
				customClass: { popup: isDark ? 'swal2-popup' : '' },
				background: isDark ? '#1a1a1a' : '#fff',
				color: isDark ? '#e5e7eb' : '#545454',
			}).then(async (result) => {
				if (result.isConfirmed) {
					Swal.fire({
						title: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö...',
						allowOutsideClick: false,
						didOpen: () => { Swal.showLoading(); },
						customClass: { popup: isDark ? 'swal2-popup' : '' },
						background: isDark ? '#1a1a1a' : '#fff',
						color: isDark ? '#e5e7eb' : '#545454',
					});

					if (typeof window.clearLocalDataForLogout === 'function') {
						await window.clearLocalDataForLogout();
					}

					localStorage.clear();
					sessionStorage.clear();

					signOut(auth).then(() => {
						// +++ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ logout ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (‡∏™‡∏µ‡πÄ‡∏ó‡∏≤) +++
						if (typeof updateCloudStatusIcon === 'function') {
							updateCloudStatusIcon(null);
						}
						window.location.reload(); 
					}).catch((error) => {
						console.error("Logout Error:", error);
						window.location.reload(); 
					});
				}
			});
		};
		// 6. onAuthStateChanged (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°)
		onAuthStateChanged(auth, (user) => {
			const nameDisplay = document.getElementById('user-name-display');
			const statusDisplay = document.getElementById('user-status');
			const avatar = document.getElementById('user-avatar');
			const btnLogin = document.getElementById('btn-login');
			const btnLogout = document.getElementById('btn-logout');

			if (!nameDisplay) return;

			if (user) {
				nameDisplay.innerText = user.displayName;
				statusDisplay.innerHTML = '<i class="fa-solid fa-circle text-green-500 text-[10px] mr-1"></i> ‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå (‡∏ã‡∏¥‡∏á‡∏Ñ‡πå‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)';
				statusDisplay.className = "text-xs md:text-sm text-green-600 dark:text-green-400 block font-medium";

				if(user.photoURL) {
					avatar.innerHTML = `<img src="${user.photoURL}" class="w-full h-full object-cover">`;
					avatar.classList.remove('bg-gray-200', 'dark:bg-gray-700');
				}

				btnLogin.style.display = 'none';
				btnLogout.style.display = 'inline-flex';

				if (typeof window.loadDataFromCloud === 'function') {
					window.loadDataFromCloud(user.uid);
				}
			} else {
				nameDisplay.innerText = "Guest (Offline)";
				statusDisplay.innerText = "‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô";
				statusDisplay.className = "text-xs md:text-sm text-gray-500 dark:text-gray-400 block";
				
				avatar.innerHTML = `<i class="fas fa-user text-gray-500 dark:text-gray-400 text-xl"></i>`;
				avatar.classList.add('bg-gray-200', 'dark:bg-gray-700');

				btnLogin.style.display = 'inline-flex';
				btnLogout.style.display = 'none';
			}

			// ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô (‡∏™‡πà‡∏á user object ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥)
			if (typeof updateCloudStatusIcon === 'function') {
				updateCloudStatusIcon(user);
			}

			// ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 200ms ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤ DOM ‡πÅ‡∏•‡∏∞ auth state ‡∏û‡∏£‡πâ‡∏≠‡∏°
			setTimeout(() => {
				if (typeof updateCloudStatusIcon === 'function') {
					updateCloudStatusIcon(user);
				}
			}, 200);
		});
	</script>

    <script type="module" src="script.js"></script>
	<script src="guide.js"></script> 
	
	<script>
        document.addEventListener('DOMContentLoaded', function() {
            // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô
            const versionEl = document.getElementById('version-display');
            if (versionEl && window.APP_VERSION) {
                versionEl.textContent = window.APP_VERSION;
            }
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (Beta)
            const statusEl = document.getElementById('app-status-display');
            if (statusEl && window.APP_STATUS_DISPLAY) {
                statusEl.textContent = window.APP_STATUS_DISPLAY;
            }
            
            // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (APP_STATUS = '') ‡πÉ‡∏´‡πâ‡∏ã‡πà‡∏≠‡∏ô
            if (statusEl && !window.APP_STATUS) {
                statusEl.style.display = 'none';
            }
        });
    </script>
	
	<script>
		(function() {
			var versionScript = document.createElement('script');
			versionScript.src = 'version.js?v=' + Date.now();
			document.head.appendChild(versionScript);
		})();
	</script>

    <script>
		// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Browser ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Service Worker ‡πÑ‡∏´‡∏°
		if ('serviceWorker' in navigator) {
			window.addEventListener('load', () => {
				navigator.serviceWorker.register('./sw.js?v=' + APP_VERSION)
					.then((registration) => {
						console.log('Service Worker Registered');

						// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏±‡πà‡∏á skipWaiting ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
						const skipWaitingImmediately = (worker) => {
							if (worker && (worker.state === 'installed' || worker.state === 'waiting')) {
								worker.postMessage({ action: 'skipWaiting' });
							}
						};

						// ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ worker ‡∏£‡∏≠‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡πÉ‡∏´‡πâ‡∏™‡∏±‡πà‡∏á skipWaiting ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
						if (registration.waiting) {
							skipWaitingImmediately(registration.waiting);
						}

						// ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï (worker ‡πÉ‡∏´‡∏°‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á)
						registration.addEventListener('updatefound', () => {
							const newWorker = registration.installing;
							if (newWorker) {
								newWorker.addEventListener('statechange', () => {
									if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
										// ‡πÄ‡∏°‡∏∑‡πà‡∏≠ worker ‡πÉ‡∏´‡∏°‡πà‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à ‡πÉ‡∏´‡πâ‡∏™‡∏±‡πà‡∏á skipWaiting ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
										skipWaitingImmediately(newWorker);
									}
								});
							}
						});
					})
					.catch((err) => {
						console.log('Service Worker Registration Failed:', err);
					});
			});

			// ‡πÄ‡∏°‡∏∑‡πà‡∏≠ worker ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô (‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á skipWaiting) ‡πÉ‡∏´‡πâ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
			let refreshing;
			navigator.serviceWorker.addEventListener('controllerchange', () => {
				if (refreshing) return;
				window.location.reload();
				refreshing = true;
			});
		}
	</script>

</body>
</html>